import{a as w,b as u,d as L,e as x,h as T,j as M,k as O,o as V,p as P,q as j}from"./chunk-DXFEN5OU.js";import{a as E}from"./chunk-DSATN2EB.js";import{G as S,I as k}from"./chunk-IADXVK6T.js";import{g as y}from"./chunk-XM5N6XW7.js";import"./chunk-WXI33M2S.js";import{Ab as F,Ib as a,Pb as C,Ta as s,Ua as m,e as _,hb as f,ja as h,jb as b,nb as p,rb as t,sb as n,tb as v,zb as d}from"./chunk-7S5IDYK3.js";function N(o,l){o&1&&(t(0,"div"),a(1,"El correo electr\xF3nico es obligatorio."),n())}function z(o,l){o&1&&(t(0,"div"),a(1,"El correo electr\xF3nico no es v\xE1lido."),n())}function B(o,l){if(o&1&&(t(0,"div",9),f(1,N,2,0,"div")(2,z,2,0,"div"),n()),o&2){let g=F();s(),p(1,g.loginForm.controls.email.errors!=null&&g.loginForm.controls.email.errors.required?1:-1),s(),p(2,g.loginForm.controls.email.errors!=null&&g.loginForm.controls.email.errors.email?2:-1)}}function R(o,l){o&1&&(t(0,"div",9),a(1," La contrase\xF1a debe contener al menos 8 caracteres. "),n())}var J=(()=>{let l=class l{constructor(i,r,e,c,I){this.fb=i,this.router=r,this.toast=e,this.loginService=c,this.userService=I,this.goToRegister=()=>this.router.navigateByUrl("/register"),this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(8)]]})}receiveValues(i){this.loginForm.patchValue(i)}login(){return _(this,null,function*(){if(this.loginForm.valid){let i=this.loginForm.controls.email.value,r=this.loginForm.controls.password.value;(yield this.isEspecialistaAutorizadoOrOther(i))&&this.loginService.login(i,r)}})}isEspecialistaAutorizadoOrOther(i){return _(this,null,function*(){let r=!0,e=yield this.userService.getUserByEmail(i);return e.rol=="especialista"&&(r=e.estado=="autorizado"),r||this.toast.error("Siendo medico especialista, debe estar autorizado por un admin para entrar"),r})}easyLogin(i){i=="admin"?(this.loginForm.controls.email.setValue("franallende2000@gmail.com"),this.loginForm.controls.password.setValue("adminadmin")):i=="especialista"?(this.loginForm.controls.email.setValue("myEspecialista@gmail.com"),this.loginForm.controls.password.setValue("pepepepe")):i=="paciente"&&(this.loginForm.controls.email.setValue("yegevan303@jzexport.com"),this.loginForm.controls.password.setValue("pepepepe"))}};l.\u0275fac=function(r){return new(r||l)(m(V),m(y),m(S),m(k),m(E))},l.\u0275cmp=h({type:l,selectors:[["app-login"]],standalone:!0,features:[C],decls:31,vars:4,consts:[[1,"container-fluid","vh-100","m-0","p-0"],[1,"row","justify-content-center","align-items-top","h-100","form-container"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"card-title","text-center"],[3,"formGroup"],[1,"form-group"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"text-danger"],["type","password","placeholder","Contrase\xF1a","formControlName","password",1,"form-control"],[1,"login-btns"],["type","button",1,"btn","btn-success","btn-block",3,"click","disabled"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["type","button",1,"btn","btn-dark","btn-block",3,"click"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),a(6,"Ingrese su usuario"),n(),v(7,"br"),t(8,"form",6)(9,"div",7),v(10,"input",8),f(11,B,3,2,"div",9),n(),t(12,"div",7),v(13,"input",10),f(14,R,2,0,"div",9),n(),t(15,"div",11)(16,"div",7)(17,"button",12),d("click",function(){return e.login()}),a(18,"Iniciar Sesi\xF3n"),n()(),t(19,"div",7)(20,"button",13),d("click",function(){return e.goToRegister()}),a(21,"Registrarse"),n()(),t(22,"div",7)(23,"button",14),d("click",function(){return e.easyLogin("admin")}),a(24,"Admin"),n()(),t(25,"div",7)(26,"button",14),d("click",function(){return e.easyLogin("especialista")}),a(27,"Especialista"),n()(),t(28,"div",7)(29,"button",14),d("click",function(){return e.easyLogin("paciente")}),a(30,"Paciente"),n()()()()()()()()()),r&2&&(s(8),b("formGroup",e.loginForm),s(3),p(11,e.loginForm.controls.email.invalid&&(e.loginForm.controls.email.dirty||e.loginForm.controls.email.touched)?11:-1),s(3),p(14,e.loginForm.controls.password.invalid&&(e.loginForm.controls.password.dirty||e.loginForm.controls.password.touched)?14:-1),s(3),b("disabled",e.loginForm.invalid))},dependencies:[P,T,w,L,x,j,M,O],styles:['.container-fluid[_ngcontent-%COMP%]{background-color:#000;background-image:url("./media/fondo-login-B4375WB6.png");background-size:contain;background-repeat:no-repeat;background-position:center;display:flex;flex-direction:column;align-items:center;padding:20px;margin:1%}.form-container[_ngcontent-%COMP%]{margin-top:5em;justify-content:center;width:600px}.form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:1em}.card-body[_ngcontent-%COMP%]{padding:2em}.login-btns[_ngcontent-%COMP%]{text-align:center}h1[_ngcontent-%COMP%]{margin-top:1em}button[_ngcontent-%COMP%]{margin-top:1em;width:200px}']});let o=l;return o})();export{J as LoginComponent};
