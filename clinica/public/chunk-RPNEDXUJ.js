import{a as fe}from"./chunk-7MA7VR3Q.js";import{a as ue,b as L}from"./chunk-JKUAASGQ.js";import{a as N,c as U}from"./chunk-GSOWVK67.js";import{d as le,g as se,n as me,o as de,p as ce,s as H}from"./chunk-ARAZ5LMM.js";import{n as k,o as V,p as pe,q as A,r as R,s as j,t as B}from"./chunk-SSCLPC2F.js";import{a as he}from"./chunk-DAF4DERI.js";import{a as z,b as W}from"./chunk-TAME4DBA.js";import{a as oe,b as ae}from"./chunk-SCZ67AR2.js";import{a as ne,b as re}from"./chunk-PAXTVJSM.js";import"./chunk-XE5KUILY.js";import{a as ie}from"./chunk-RCHQO65C.js";import{P as I}from"./chunk-MT3VMLBQ.js";import"./chunk-3PKXA2GJ.js";import"./chunk-XCRSOGC7.js";import{$a as f,Ab as n,Bb as c,Eb as T,Ga as Q,Hb as _,Ib as p,Rb as s,Sb as w,Tb as F,Ub as Z,Wb as Y,Xb as $,Ya as G,Yb as K,_a as l,_b as S,bc as g,cc as x,f as q,h as J,na as C,pb as u,rb as d,vb as h,vc as ee,wb as b,wc as te,xa as y,xb as D,ya as v,yb as E,yc as P,zb as a}from"./chunk-EWRZD5YS.js";var O=q(ue());function De(t,r){if(t&1&&(a(0,"option",12),s(1),g(2,"horariosAmPmFormat"),n()),t&2){let e=r.$implicit;d("value",e),l(),w(x(2,2,e))}}function Ee(t,r){if(t&1&&(a(0,"option",12),s(1),g(2,"horariosAmPmFormat"),n()),t&2){let e=r.$implicit;d("value",e),l(),w(x(2,2,e))}}function Te(t,r){if(t&1){let e=T();a(0,"tr")(1,"td",8),c(2,"input",9),g(3,"translateDayName"),n(),a(4,"td",8),c(5,"input",9),g(6,"setFechaWithSlashes"),n(),a(7,"td",8)(8,"select",10),K("ngModelChange",function(i){let m=y(e).$implicit;return $(m.desde,i)||(m.desde=i),v(i)}),u(9,De,3,4,"option",11),n()(),a(10,"td",8)(11,"select",10),K("ngModelChange",function(i){let m=y(e).$implicit;return $(m.hasta,i)||(m.hasta=i),v(i)}),u(12,Ee,3,4,"option",11),n()()()}if(t&2){let e=r.$implicit,o=p(2);l(2),d("value",x(3,6,e.dayName)),l(3),d("value",x(6,8,e.fecha)),l(3),Y("ngModel",e.desde),l(),d("ngForOf",o.validTimes),l(2),Y("ngModel",e.hasta),l(),d("ngForOf",o.validTimes)}}function Pe(t,r){if(t&1&&D(0,Te,13,10,"tr",null,b),t&2){let e=p();E(e.daysData)}}var xe=(()=>{let r=class r{constructor(o,i,m){this.dialogRef=o,this.data=i,this.toast=m,this.serviceHoursUpdated=new Q,this.daysData=[],this.validTimes=[]}ngOnInit(){this.data&&this.data.daysData&&(this.daysData=this.data.daysData,this.generateValidTimes())}generateValidTimes(){let o=(0,O.default)("07:00","HH:mm"),i=(0,O.default)("18:00","HH:mm");for(this.validTimes.push("");o<=i;)this.validTimes.push(o.format("HH:mm")),o.add(30,"minutes")}actualizarHorarios(){this.isValid()&&(this.serviceHoursUpdated.emit(this.daysData),this.dialogRef.close(this.daysData))}isValid(){let o=!0;return this.daysData.forEach(i=>{if(i.desde!=""&&i.hasta==""&&(this.toast.error("Todo rango de turnos necesita un horario de inicio y finalizaci\xF3n completos"),o=!1),i.hasta!=""&&i.desde==""&&(this.toast.error("Todo rango de turnos necesita un desde y hasta completo"),o=!1),i.desde!==""&&i.hasta!==""){let m=(0,O.default)(i.desde,"HH:mm"),M=(0,O.default)(i.hasta,"HH:mm");m.isAfter(M)&&(this.toast.error("El horario de inicio no puede ser posterior al horario de finalizaci\xF3n"),o=!1),i.desde===i.hasta&&(this.toast.error("Todo rango de turnos necesita un horario de inicio y finalizaci\xF3n completos"),o=!1)}}),o}onCancel(){this.dialogRef.close()}};r.\u0275fac=function(i){return new(i||r)(f(k),f(V),f(I))},r.\u0275cmp=C({type:r,selectors:[["app-modal-horarios"]],outputs:{serviceHoursUpdated:"serviceHoursUpdated"},standalone:!0,features:[S],decls:23,vars:1,consts:[["mat-dialog-title","",1,"text-center"],["mat-dialog-content",""],[1,"text-center"],[1,"table","text-center"],["scope","col"],["mat-dialog-actions","",1,"d-flex","justify-content-evenly"],["mat-button","",1,"btn","btn-danger",3,"click"],["mat-button","",1,"btn","btn-success",3,"click"],[1,"align-middle"],["type","text","readonly","",1,"short-input",3,"value"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,m){i&1&&(a(0,"h1",0),s(1,"Horario disponibles de atenci\xF3n"),n(),a(2,"div",1)(3,"p",2),s(4,"Elija su horario de atenci\xF3n, de 07:00 a 18:00"),n(),a(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),s(9,"D\xEDa"),n(),a(10,"th",4),s(11,"Fecha"),n(),a(12,"th",4),s(13,"Desde"),n(),a(14,"th",4),s(15,"Hasta"),n()()(),a(16,"tbody"),u(17,Pe,2,0),n()()(),a(18,"div",5)(19,"button",6),_("click",function(){return m.onCancel()}),s(20,"Cancelar"),n(),a(21,"button",7),_("click",function(){return m.actualizarHorarios()}),s(22,"Guardar"),n()()),i&2&&(l(17),h(17,m.daysData.length==15?17:-1))},dependencies:[H,de,ce,me,le,se,P,ee,B,A,j,R,U,N,L,W,z],styles:[".btn[_ngcontent-%COMP%]:hover{cursor:pointer;color:#fff}.short-input[_ngcontent-%COMP%]{width:100px}"]});let t=r;return t})();var ye=q(ue());function Ie(t,r){if(t&1&&(a(0,"tr")(1,"td",7),c(2,"input",8),g(3,"translateDayName"),n(),a(4,"td",7),c(5,"input",8),g(6,"setFechaWithSlashes"),n(),a(7,"td",7),c(8,"input",8),g(9,"horariosAmPmFormat"),n(),a(10,"td",7),c(11,"input",8),n()()),t&2){let e=p().$implicit;l(2),d("value",x(3,4,e.dayName)),l(3),d("value",x(6,6,e.fecha)),l(3),d("value",x(9,8,e.desde)),l(3),d("value",e.hasta)}}function He(t,r){t&1&&(a(0,"tr",9)(1,"td",7),c(2,"input",10),n(),a(3,"td",7),c(4,"input",10),n(),a(5,"td",7),c(6,"input",10),n(),a(7,"td",7),c(8,"input",10),n()()),t&2&&(l(2),d("value","-"),l(2),d("value","-/-/-"),l(2),d("value","--:--"),l(2),d("value","--:--"))}function we(t,r){if(t&1&&u(0,Ie,12,10,"tr")(1,He,9,4),t&2){let e=r.$implicit;h(0,e.desde!=""&&e.hasta!=""?0:1)}}function Fe(t,r){if(t&1&&D(0,we,2,1,null,null,b),t&2){let e=p();E(e.daysData)}}var Ce=(()=>{let r=class r{constructor(o,i,m){this.dialogRef=o,this.data=i,this.toast=m,this.daysData=[],this.daysData=i.daysData}onCancel(){this.dialogRef.close()}};r.\u0275fac=function(i){return new(i||r)(f(k),f(V),f(I))},r.\u0275cmp=C({type:r,selectors:[["app-ver-modal-horarios"]],standalone:!0,features:[S],decls:21,vars:1,consts:[["mat-dialog-title","",1,"text-center"],["mat-dialog-content",""],[1,"text-center"],[1,"table","text-center"],["scope","col"],["mat-dialog-actions","",1,"d-flex","justify-content-evenly"],["mat-button","",1,"btn","btn-primary",3,"click"],[1,"align-middle"],["type","text","readonly","",1,"short-input",3,"value"],[1,"non-chosen"],["type","text","readonly","",1,"short-input","text-center",3,"value"]],template:function(i,m){i&1&&(a(0,"h1",0),s(1,"Horario elegidos de atenci\xF3n"),n(),a(2,"div",1)(3,"p",2),s(4,"Los horarios de atenci\xF3n son de 07:00 a 18:00"),n(),a(5,"table",3)(6,"thead")(7,"tr")(8,"th",4),s(9,"D\xEDa"),n(),a(10,"th",4),s(11,"Fecha"),n(),a(12,"th",4),s(13,"Desde"),n(),a(14,"th",4),s(15,"Hasta"),n()()(),a(16,"tbody"),u(17,Fe,2,0),n()()(),a(18,"div",5)(19,"button",6),_("click",function(){return m.onCancel()}),s(20,"Ok"),n()()),i&2&&(l(17),h(17,m.daysData.length==15?17:-1))},dependencies:[H,P,B,A,j,R,U,N,L,W,z],styles:[".non-chosen[_ngcontent-%COMP%]{text-align:center;opacity:.3}.btn[_ngcontent-%COMP%]:hover{cursor:pointer;color:#fff}.short-input[_ngcontent-%COMP%]{width:100px}"]});let t=r;return t})();function Oe(t,r){if(t&1&&c(0,"app-spinner",3),t&2){let e=p();d("loading",e.loading)}}function ke(t,r){if(t&1){let e=T();a(0,"div"),c(1,"img",9),a(2,"button",10),_("click",function(){y(e);let i=p(2);return v(i.toggleImage())}),s(3,"Cambiar Imagen"),n()()}if(t&2){let e=p(2);l(),d("src",e.selectedImage,G)}}function Ve(t,r){if(t&1&&(a(0,"div"),c(1,"img",9),n()),t&2){let e=p(2);l(),d("src",e.mySelf==null?null:e.mySelf.mainImg,G)}}function Ae(t,r){if(t&1&&(a(0,"p",7)(1,"strong"),s(2,"Obra Social:"),n(),s(3),n()),t&2){let e=p(2);l(3),F(" ",e.mySelf==null?null:e.mySelf.obraSocial,"")}}function Re(t,r){if(t&1&&(a(0,"li",12),s(1),n()),t&2){let e=r.$implicit;l(),w(e)}}function je(t,r){if(t&1){let e=T();a(0,"p",11)(1,"strong"),s(2,"Especialidades:"),n(),D(3,Re,2,1,"li",12,b),n(),a(5,"button",13),_("click",function(){y(e);let i=p(2);return v(i.verHorarios())}),s(6,"Ver mis horarios"),n(),a(7,"button",13),_("click",function(){y(e);let i=p(2);return v(i.openModal())}),s(8,"Gestionar mis horarios"),n()}if(t&2){let e=p(2);l(3),E(e.mySelf==null?null:e.mySelf.especialidad)}}function Be(t,r){if(t&1){let e=T();a(0,"button",14),_("click",function(){y(e);let i=p(2);return v(i.verHistoriaClinica(i.mySelf))}),s(1," Ver Historia Clinica "),n()}}function Ne(t,r){if(t&1&&(a(0,"div",4),u(1,ke,4,1,"div",5)(2,Ve,2,1,"div",5),a(3,"div",6)(4,"p",7)(5,"strong"),s(6,"Usuario:"),n(),s(7),n(),a(8,"p",7)(9,"strong"),s(10,"DNI:"),n(),s(11),n(),a(12,"p",7)(13,"strong"),s(14,"Email:"),n(),s(15),n(),a(16,"p",7)(17,"strong"),s(18,"Rol:"),n(),s(19),n(),u(20,Ae,4,1,"p",7)(21,je,9,0)(22,Be,2,0,"button",8),n()()),t&2){let e=p();l(),d("ngIf",e.currentRol==="paciente"),l(),d("ngIf",e.currentRol!=="paciente"),l(5),Z(" ",e.mySelf==null?null:e.mySelf.nombre," ",e.mySelf==null?null:e.mySelf.apellido,""),l(4),F(" ",e.mySelf==null?null:e.mySelf.dni," "),l(4),F(" ",e.mySelf==null?null:e.mySelf.email,""),l(4),F(" ",e.mySelf==null?null:e.mySelf.rol,""),l(),h(20,e.currentRol=="paciente"?20:-1),l(),h(21,e.currentRol=="especialista"?21:-1),l(),h(22,e.currentRol=="paciente"?22:-1)}}var ve=(()=>{let r=class r{constructor(o,i,m,M,Se){this.userService=o,this.loginService=i,this.turnoService=m,this.toast=M,this.dialog=Se,this.loading=!0,this.currentRol="",this.mySelf=null,this.daysData=[],this.selectedImage=""}ngOnInit(){this.getData()}getData(){return J(this,null,function*(){try{let o=this.loginService.getLoggedUser();this.mySelf=yield this.userService.getUserByEmail(o),this.selectedImage=this.mySelf?.mainImg,this.currentRol=this.mySelf?.rol,this.currentRol=="especialista"&&(this.daysData=this.daysData)}catch(o){console.log(o)}finally{this.loading=!1}})}toggleImage(){this.selectedImage=this.selectedImage===this.mySelf?.mainImg?this.mySelf?.extraImg:this.mySelf?.mainImg}openModal(){let o=!1;this.mySelf?.horarios?.forEach(m=>{m.dayName!=""&&m.fecha!=""&&m.desde!=""&&m.hasta!=""&&(o=!0)}),o||this.generateDaysData(),this.dialog.open(xe,{width:"600px",data:{daysData:o?this.mySelf?.horarios:this.daysData}}).afterClosed().subscribe(m=>{m&&(this.daysData=m,this.saveHorarios())})}verHorarios(){let o=this.mySelf?.horarios;this.dialog.open(Ce,{width:"600px",data:{daysData:o}})}generateDaysData(){let o=(0,ye.default)();this.daysData=[];for(let i=0;i<15;i++){let m=o.clone().add(i,"days");this.daysData.push({dayName:m.format("dddd"),desde:"",hasta:"",fecha:m.format("DD-MM-YYYY"),estaDisponible:!0,timeSlot:{time:"",estaDisponible:!0}})}}saveHorarios(){this.mySelf&&(this.mySelf.horarios=this.daysData.map(o=>({dayName:o.dayName,fecha:o.fecha,desde:o.desde,hasta:o.hasta,estaDisponible:!0,timeSlot:{time:"",estaDisponible:!0}})),this.userService.update(this.mySelf))}verHistoriaClinica(o){this.dialog.open(fe,{width:"600px",data:o?.historiaClinica})}};r.\u0275fac=function(i){return new(i||r)(f(ne),f(ie),f(he),f(I),f(pe))},r.\u0275cmp=C({type:r,selectors:[["app-mi-perfil"]],standalone:!0,features:[S],decls:5,vars:1,consts:[[1,"container-fluid"],[1,"container","mt-4"],[1,"row","container"],[3,"loading"],[1,"user-card"],[4,"ngIf"],[1,"user-details"],[1,"user-data"],[1,"btn","btn-dark","text-center"],["alt","User Image",1,"user-image",3,"src"],[1,"btn","btn-primary",3,"click"],[1,"user-data","list-container"],[1,"list-data"],["data-bs-toggle","modal","data-bs-target","#horariosModal",1,"btn","btn-primary","text-center",3,"click"],[1,"btn","btn-dark","text-center",3,"click"]],template:function(i,m){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),u(3,Oe,1,1,"app-spinner",3)(4,Ne,23,10),n()()()),i&2&&(l(3),h(3,m.loading?3:4))},dependencies:[re,P,te,H],styles:['.container-fluid[_ngcontent-%COMP%]{height:85vh;background-color:#6ad8d4;background-image:url("./media/main_fondo-S2RK2XML.png");background-size:250px 250px;background-repeat:repeat;background-position:center;padding:20px}.mt-4[_ngcontent-%COMP%]{height:800px}.user-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 6px #0000001a;text-align:center;margin:1em auto 0;padding:16px;width:400px}.user-image[_ngcontent-%COMP%]{border-radius:50%;width:200px;height:200px;object-fit:cover;margin-top:1em;margin-bottom:3em}.user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.user-data[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:1.2em}.list-container[_ngcontent-%COMP%]{width:50%;margin-left:25%;text-align:left}.list-data[_ngcontent-%COMP%]{margin-top:.5em}button[_ngcontent-%COMP%]:hover{cursor:pointer;color:#fff}.btn[_ngcontent-%COMP%]{margin:1em}']});let t=r;return t})();var bt=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=C({type:r,selectors:[["app-perfil-container"]],standalone:!0,features:[S],decls:4,vars:0,consts:[[1,"container-fluid","m-0","p-0"]],template:function(i,m){i&1&&(a(0,"div",0),c(1,"app-navbar")(2,"app-mi-perfil")(3,"app-footer"),n())},dependencies:[ve,oe,ae],styles:[".user-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 6px #0000001a;max-width:300px;text-align:center;margin:0 auto;padding:16px}.user-image[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px;object-fit:cover;margin-bottom:16px}.user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.user-name[_ngcontent-%COMP%], .user-email[_ngcontent-%COMP%]{margin:4px 0}.user-name[_ngcontent-%COMP%]{font-size:1.2em}.user-email[_ngcontent-%COMP%]{color:#555}"]});let t=r;return t})();export{bt as PerfilContainerComponent};
