import{F as S,J as c,K as d,M as p,N as R,O as u}from"./chunk-MT3VMLBQ.js";import{Ab as E,Rb as q,_b as D,a as m,da as f,h as l,ia as y,na as g,pb as b,vb as w,zb as v}from"./chunk-EWRZD5YS.js";var F=(()=>{let e=class e{constructor(o){this.firestore=o,this.userRol="",this.setUserRol=t=>this.userRol=t,this.getUserRol=()=>this.userRol}getAllUsers(){return l(this,null,function*(){let o=c(this.firestore,"users");try{let t=yield d(o),s=[];return t.forEach(r=>{s.push(r.data())}),s}catch(t){throw console.error("Error obteniendo los usuarios:",t),t}})}getUserByEmail(o){return l(this,null,function*(){try{let t=c(this.firestore,"users"),s=p(t,u("email","==",o)),r=yield d(s);if(r.empty)return null;{let i=r.docs[0].data();return this.setUserRol(i.rol),m({},i)}}catch(t){return console.error("Error al obtener el usuario via email: ",t),null}})}getNameAndSurnameByEmail(o){return l(this,null,function*(){try{let t=c(this.firestore,"users"),s=p(t,u("email","==",o)),r=yield d(s);if(r.empty)return"";{let i=r.docs[0].data();this.setUserRol(i.rol);let h=m({},i);return`${h.nombre} ${h.apellido}`}}catch(t){return console.error("Error al obtener el usuario via email: ",t),""}})}getAllEnabledUsersByRol(o){return l(this,null,function*(){try{let t=c(this.firestore,"users"),s=p(t,u("rol","==",o),u("estado","==","habilitado")),r=yield d(s);if(r.empty)return null;{let n=[];return r.forEach(i=>{n.push(i.data())}),n}}catch(t){return console.error("Error al obtener usuarios por rol: ",t),null}})}update(o){return l(this,null,function*(){try{let t=c(this.firestore,"users"),s=p(t,u("email","==",o.email)),r=yield d(s);if(!r.empty){let n=r.docs[0].ref;yield R(n,{nombre:o.nombre,apellido:o.apellido,edad:o.edad,dni:o.dni,email:o.email,password:o.password,rol:o.rol,mainImg:o.mainImg,extraImg:o.extraImg,obraSocial:o.obraSocial,especialidad:o.especialidad,estado:o.estado,turnos:o.turnos,horarios:o.horarios,historiaClinica:o.historiaClinica})}}catch(t){throw console.error("Error actualizando el usuario:",t),t}})}};e.\u0275fac=function(t){return new(t||e)(y(S))},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"});let a=e;return a})();function x(a,e){a&1&&(v(0,"div",0)(1,"div",1)(2,"span",2),q(3,"Cargando..."),E()()())}var B=(()=>{let e=class e{constructor(){this.loading=!1}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g({type:e,selectors:[["app-spinner"]],inputs:{loading:"loading"},standalone:!0,features:[D],decls:1,vars:1,consts:[[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,s){t&1&&b(0,x,4,0,"div",0),t&2&&w(0,s.loading?0:-1)}});let a=e;return a})();export{F as a,B as b};
