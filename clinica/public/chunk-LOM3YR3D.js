import{F as S,J as c,K as d,M as p,N as R,O as u}from"./chunk-QWFAWHVU.js";import{Mb as q,Ub as D,a as m,ba as f,g as l,ga as y,kb as b,la as g,qb as w,ub as v,vb as E}from"./chunk-4VRYZ7GX.js";var F=(()=>{let o=class o{constructor(t){this.firestore=t,this.userRol="",this.setUserRol=e=>this.userRol=e,this.getUserRol=()=>this.userRol}getAllUsers(){return l(this,null,function*(){let t=c(this.firestore,"users");try{let e=yield d(t),s=[];return e.forEach(r=>{s.push(r.data())}),s}catch(e){throw console.error("Error obteniendo los usuarios:",e),e}})}getUserByEmail(t){return l(this,null,function*(){try{let e=c(this.firestore,"users"),s=p(e,u("email","==",t)),r=yield d(s);if(r.empty)return null;{let n=r.docs[0].data();return this.setUserRol(n.rol),m({},n)}}catch(e){return console.error("Error al obtener el usuario via email: ",e),null}})}getNameAndSurnameByEmail(t){return l(this,null,function*(){try{let e=c(this.firestore,"users"),s=p(e,u("email","==",t)),r=yield d(s);if(r.empty)return"";{let n=r.docs[0].data();this.setUserRol(n.rol);let h=m({},n);return`${h.nombre} ${h.apellido}`}}catch(e){return console.error("Error al obtener el usuario via email: ",e),""}})}update(t){return l(this,null,function*(){try{let e=c(this.firestore,"users"),s=p(e,u("email","==",t.email)),r=yield d(s);if(!r.empty){let i=r.docs[0].ref;yield R(i,{nombre:t.nombre,apellido:t.apellido,edad:t.edad,dni:t.dni,email:t.email,password:t.password,rol:t.rol,mainImg:t.mainImg,extraImg:t.extraImg,obraSocial:t.obraSocial,especialidad:t.especialidad,estado:t.estado})}}catch(e){throw console.error("Error actualizando el usuario:",e),e}})}getAllEnabledUsersByRol(t){return l(this,null,function*(){try{let e=c(this.firestore,"users"),s=p(e,u("rol","==",t),u("estado","==","habilitado")),r=yield d(s);if(r.empty)return null;{let i=[];return r.forEach(n=>{i.push(n.data())}),i}}catch(e){return console.error("Error al obtener usuarios por rol: ",e),null}})}};o.\u0275fac=function(e){return new(e||o)(y(S))},o.\u0275prov=f({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();function x(a,o){a&1&&(v(0,"div",0)(1,"div",1)(2,"span",2),q(3,"Cargando..."),E()()())}var B=(()=>{let o=class o{constructor(){this.loading=!1}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=g({type:o,selectors:[["app-spinner"]],inputs:{loading:"loading"},standalone:!0,features:[D],decls:1,vars:1,consts:[[1,"text-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(e,s){e&1&&b(0,x,4,0,"div",0),e&2&&w(0,s.loading?0:-1)}});let a=o;return a})();export{F as a,B as b};
