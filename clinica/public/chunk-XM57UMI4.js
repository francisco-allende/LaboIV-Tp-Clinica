import{a as Z,b as te,c as ie}from"./chunk-ZGC33XT2.js";import{a as Q,b as X,c as Y}from"./chunk-E4VBJUJN.js";import{a as M}from"./chunk-GSNWQ4FR.js";import{a as ee}from"./chunk-AT26J2S3.js";import{a as ae}from"./chunk-QHILSBCE.js";import{a as N}from"./chunk-ZHVU5HJQ.js";import{h as R,i as U,l as G,m as J,o as q,r as K}from"./chunk-KIGVSZDZ.js";import{E as W}from"./chunk-CC3LA27V.js";import{s as z}from"./chunk-FSRSBQOR.js";import{P as j}from"./chunk-KOE6HBMH.js";import{Ab as $,Db as g,Eb as _,Mb as c,Ob as S,Pb as I,Qb as B,Sb as V,Tb as A,Ua as p,Ub as L,Va as C,Wb as O,Zb as h,_b as x,ga as T,kb as P,mb as H,qa as f,ra as u,rb as y,sb as v,tb as b,ub as w,vb as o,wb as r,xb as k}from"./chunk-TDWWCWZI.js";import{h as D}from"./chunk-DLDOR3YA.js";function le(l,s){if(l&1&&(o(0,"p"),c(1),h(2,"capitalizeFirstLetterPipe"),h(3,"capitalizeFirstLetterPipe"),r()),l&2){let t=s.$implicit;p(),I("",x(2,2,t.key),": ",x(3,4,t.value),"")}}function re(l,s){if(l&1&&(o(0,"h4"),c(1,"Datos Adicionales"),r(),b(2,le,4,6,"p",null,v)),l&2){let t=_().$implicit;p(2),w(t.datosDinamicos)}}function ce(l,s){if(l&1&&(o(0,"p"),c(1),h(2,"capitalizeFirstLetterPipe"),h(3,"setFechaWithSlashes"),h(4,"horariosAmPmFormat"),r(),o(5,"p"),c(6),r(),o(7,"p"),c(8),r(),o(9,"p"),c(10),r(),o(11,"p"),c(12),h(13,"capitalizeFirstLetterPipe"),r(),P(14,re,4,0),o(15,"p"),c(16,"-------------------------------------------------------------"),r()),l&2){let t=s.$implicit;p(),B(" ",x(2,8,t.fecha.dayName)," ",x(3,10,t.fecha.fecha)," ",x(4,12,t.fecha.timeSlot.time)," "),p(5),S("Altura: ",t.altura," cm"),p(2),S("Peso: ",t.peso," kg"),p(2),S("Temperatura: ",t.temperatura," \xB0C"),p(2),S("Presi\xF3n: ",x(13,14,t.presion),""),p(2),y(14,t.datosDinamicos&&t.datosDinamicos.length>0?14:-1)}}function se(l,s){if(l&1&&(o(0,"mat-option",8),c(1),r()),l&2){let t=s.$implicit;H("value",t),p(),I(" ",t.nombre," ",t.apellido," ")}}function pe(l,s){if(l&1){let t=$();o(0,"h2",0),c(1,"Historia Cl\xEDnica"),r(),o(2,"mat-dialog-content",1),k(3,"br"),b(4,ce,17,16,null,null,v),o(6,"div",2)(7,"div",3)(8,"button",4),g("click",function(){f(t);let n=_();return u(n.descargarHistoriaPDF())}),o(9,"mat-icon"),c(10,"download"),r(),c(11," Descargar PDF Historia "),r()(),o(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),c(15,"Seleccione un especialista"),r(),o(16,"mat-select",7),L("valueChange",function(n){f(t);let e=_();return A(e.especialistaSeleccionado,n)||(e.especialistaSeleccionado=n),u(n)}),b(17,se,2,3,"mat-option",8,v),r()(),o(19,"button",9),g("click",function(){f(t);let n=_();return u(n.descargarPorEspecialistaPDF())}),o(20,"mat-icon"),c(21,"download"),r(),c(22," PDF Historia por especialista "),r()(),o(23,"div",3)(24,"button",10),g("click",function(){f(t);let n=_();return u(n.onClose())}),c(25,"Cerrar"),r()()()()}if(l&2){let t=_();p(4),w(t.paciente.historiaClinica),p(12),V("value",t.especialistaSeleccionado),p(),w(t.especialistas)}}function me(l,s){if(l&1){let t=$();o(0,"h2",11),c(1,"No hay historia cl\xEDnica disponible."),r(),o(2,"div",2)(3,"button",10),g("click",function(){f(t);let n=_();return u(n.onClose())}),c(4,"Ok"),r()()}}var Ie=(()=>{let s=class s{constructor(i,n,e,E,m){this.dialogRef=i,this.paciente=n,this.userService=e,this.turnosService=E,this.toast=m,this.especialistas=[],this.loadEspecialistas()}onClose(){this.dialogRef.close()}loadEspecialistas(){return D(this,null,function*(){this.especialistas=yield this.userService.getAllEnabledUsersByRol("especialista"),console.log(this.especialistas)})}descargarHistoriaPDF(){let i=new M,n=new Date,e=20,E=i.internal.pageSize.height-10;i.addImage("../../../../assets/logo.png","PNG",150,10,50,50),i.text(`Fecha de creaci\xF3n: ${n.toLocaleDateString("es-ES")}`,10,e),e+=10,i.text(`Nombre del paciente: ${this.paciente.nombre} ${this.paciente.apellido}`,10,e),e+=10,i.text(`DNI: ${this.paciente.dni}`,10,e),e+=10,i.text(`Obra Social: ${this.paciente.obraSocial||"-"}`,10,e),e+=10,e+=10,i.text("Historia Cl\xEDnica:",10,e),e+=10,this.paciente.historiaClinica&&this.paciente.historiaClinica.length>0?this.paciente.historiaClinica.forEach(m=>{i.text(`Fecha: ${m.fecha.fecha}`,15,e),e+=10,i.text(`Altura: ${m.altura} cm`,15,e),e+=10,i.text(`Peso: ${m.peso} kgs`,15,e),e+=10,i.text(`Temperatura: ${m.temperatura} \xBAC`,15,e),e+=10,i.text(`Presi\xF3n: ${m.presion}`,15,e),e+=10,m.datosDinamicos&&m.datosDinamicos.length>0&&(i.text("Datos Din\xE1micos:",15,e),e+=10,m.datosDinamicos.forEach(a=>{i.text(`${a.key}: ${a.value}`,20,e),e+=10})),e+=20}):(i.text("No hay datos de historia cl\xEDnica disponibles.",15,e),e+=10),i.save(`Historia_Clinica_${this.paciente.nombre}_${this.paciente.apellido}.pdf`)}descargarPorEspecialistaPDF(){return D(this,null,function*(){let n=(yield this.turnosService.getTurnosFromPaciente(this.paciente.email))?.filter(d=>d.especialistaId===this.especialistaSeleccionado?.email);if(n?.length===0){this.toast.info("No hay turnos con el especialista seleccionado");return}let e=new M;e.addImage("../../../../assets/logo.png","JPEG",10,10,50,30),e.setFontSize(18),e.text("Informe de Historia Cl\xEDnica por Especialista",70,20);let m=new Date().toLocaleDateString();e.setFontSize(12),e.text(`Fecha de emisi\xF3n: ${m}`,70,30);let a=50;e.text(`Nombre Paciente: ${this.paciente.nombre} ${this.paciente.apellido}`,10,a),a+=10,e.text(`DNI: ${this.paciente.dni}`,10,a),a+=10,e.text(`Obra Social: ${this.paciente.obraSocial||"-"}`,10,a),a+=20,e.text("Turnos:",10,a),a+=10,n?.forEach(d=>{let F=this.especialistas?.find(oe=>oe.email===d.especialistaId),ne=F?`${F.nombre} ${F.apellido}`:"Desconocido";e.text(`Fecha: ${d.fecha.fecha}`,10,a),a+=10,e.text(`Especialista: ${ne}`,10,a),a+=10,e.text(`Especialialidad: ${d.especialidad}`,10,a),a+=10,e.text(`Estado del turno: ${d.estado}`,10,a),a+=10,d.comentario!=""&&(e.text(`Comentario del paciente: ${d.comentario}`,10,a),a+=10),d.resenia!=""&&(e.text(`Diagn\xF3stico: ${d.resenia}`,10,a),a+=10),a+=10}),e.save(`Historia_Clinica_${this.paciente.nombre}_${this.paciente.apellido}_Especialista_${this.especialistaSeleccionado?.nombre}_${this.especialistaSeleccionado?.apellido}.pdf`)})}};s.\u0275fac=function(n){return new(n||s)(C(R),C(U),C(N),C(ae),C(j))},s.\u0275cmp=T({type:s,selectors:[["app-show-historia-clinica"]],standalone:!0,features:[O],decls:2,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],[1,"dialog-content"],["mat-dialog-actions","",1,"dialog-actions"],[1,"dialog-button-row"],["mat-button","",1,"text-center","btn","btn-success",3,"click"],[1,"dialog-button-row","d-flex","justify-content-evenly"],["appearance","fill",1,"me-3"],[3,"valueChange","value"],[3,"value"],["mat-button","",1,"btn","btn-dark",2,"height","45px","margin-top","0.5em",3,"click"],["mat-button","",1,"text-center","btn","btn-primary",3,"click"],[1,"text-center",2,"padding","1em"]],template:function(n,e){n&1&&P(0,pe,26,1)(1,me,5,0),n&2&&y(0,e.paciente.historiaClinica&&e.paciente.historiaClinica.length>0?0:1)},dependencies:[W,ie,K,q,te,z,ee,Z,Y,X,Q,G,J],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;color:#000;overflow-y:auto}.dialog-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-bottom:1em}.my-divider[_ngcontent-%COMP%]{border-top:1px solid #ccc;margin:10px 0}.dialog-button-row[_ngcontent-%COMP%]{margin-bottom:1em}"]});let l=s;return l})();export{Ie as a};
