import{F as b,J as c,K as l,M as d,N as w,O as u}from"./chunk-QWFAWHVU.js";import{a as m,ba as y,g as n,ga as f}from"./chunk-4VRYZ7GX.js";var R=(()=>{let s=class s{constructor(o){this.firestore=o,this.userRol="",this.setUserRol=r=>this.userRol=r,this.getUserRol=()=>this.userRol}getAllUsers(){return n(this,null,function*(){let o=c(this.firestore,"users");try{let r=yield l(o),t=[];return r.forEach(e=>{t.push(e.data())}),t}catch(r){throw console.error("Error obteniendo los usuarios:",r),r}})}getUserByEmail(o){return n(this,null,function*(){try{let r=c(this.firestore,"users"),t=d(r,u("email","==",o)),e=yield l(t);if(e.empty)return null;{let a=e.docs[0].data();return this.setUserRol(a.rol),m({},a)}}catch(r){return console.error("Error al obtener el usuario via email: ",r),null}})}getNameAndSurnameByEmail(o){return n(this,null,function*(){try{let r=c(this.firestore,"users"),t=d(r,u("email","==",o)),e=yield l(t);if(e.empty)return"";{let a=e.docs[0].data();this.setUserRol(a.rol);let p=m({},a);return`${p.nombre} ${p.apellido}`}}catch(r){return console.error("Error al obtener el usuario via email: ",r),""}})}update(o){return n(this,null,function*(){try{let r=c(this.firestore,"users"),t=d(r,u("email","==",o.email)),e=yield l(t);if(!e.empty){let i=e.docs[0].ref;yield w(i,{nombre:o.nombre,apellido:o.apellido,edad:o.edad,dni:o.dni,email:o.email,password:o.password,rol:o.rol,mainImg:o.mainImg,extraImg:o.extraImg,obraSocial:o.obraSocial,especialidad:o.especialidad,estado:o.estado})}}catch(r){throw console.error("Error actualizando el usuario:",r),r}})}getAllEnabledUsersByRol(o){return n(this,null,function*(){try{let r=c(this.firestore,"users"),t=d(r,u("rol","==",o),u("estado","==","habilitado")),e=yield l(t);if(e.empty)return null;{let i=[];return e.forEach(a=>{i.push(a.data())}),i}}catch(r){return console.error("Error al obtener usuarios por rol: ",r),null}})}};s.\u0275fac=function(r){return new(r||s)(f(b))},s.\u0275prov=y({token:s,factory:s.\u0275fac,providedIn:"root"});let h=s;return h})();export{R as a};
