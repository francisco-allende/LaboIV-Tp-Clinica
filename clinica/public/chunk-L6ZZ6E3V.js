import{a as ne,b as oe,c as ae}from"./chunk-NZOYF3CK.js";import{a as X,b as Q,c as Z,d as tt}from"./chunk-FZKDYG2G.js";import{a as y,b as Xt,c as E}from"./chunk-GSOWVK67.js";import{a as B,d as U,g as H,i as Kt,s as $,t as G}from"./chunk-ARAZ5LMM.js";import{a as Qt}from"./chunk-NP2AXQHK.js";import{i as ft,n as T,o as P,p as Jt,q,r as Y,s as K,t as J}from"./chunk-SSCLPC2F.js";import{a as ie}from"./chunk-DAF4DERI.js";import{a as Zt,b as te,c as ee}from"./chunk-TAME4DBA.js";import{a as Gt,b as qt}from"./chunk-SCZ67AR2.js";import{a as $t,b as Yt}from"./chunk-PAXTVJSM.js";import"./chunk-XE5KUILY.js";import{a as Ht}from"./chunk-RCHQO65C.js";import{P as dt}from"./chunk-MT3VMLBQ.js";import"./chunk-3PKXA2GJ.js";import{a as Bt,e as Ut}from"./chunk-XCRSOGC7.js";import{$a as _,A as L,Ab as l,Bb as W,Ca as Et,Ea as st,Eb as x,F as Ct,Fa as bt,Hb as u,Ib as m,Jb as Vt,K as vt,Kb as Nt,O as xt,R as Mt,Rb as d,Sb as M,W as St,Wa as j,Wb as I,Xb as F,Yb as w,_a as p,_b as v,aa as rt,bc as lt,cc as ct,da as It,ea as Ft,ga as ut,h as z,i as gt,ia as it,ja as wt,lb as Dt,ma as Tt,na as C,nc as Lt,oa as yt,pb as b,qb as Rt,rb as R,rc as _t,tb as kt,ub as Pt,vb as S,vc as jt,w as N,wb as At,wc as Wt,x as ht,xa as g,xb as zt,ya as h,yb as Ot,yc as k,zb as c}from"./chunk-EWRZD5YS.js";var ce=(()=>{let o=class o{constructor(t){this.dialogRef=t,this.rechazoReason=""}onConfirm(){this.rechazoReason!=""&&this.dialogRef.close(this.rechazoReason)}onCancel(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T))},o.\u0275cmp=C({type:o,selectors:[["app-rechazar-turno-dialog"]],standalone:!0,features:[v],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Motivo del rechazo","rows","5",3,"ngModelChange","ngModel"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(c(0,"h1",0),d(1,"Rechazar Turno"),l(),c(2,"div",1)(3,"mat-form-field",2)(4,"textarea",3),w("ngModelChange",function(s){return F(i.rechazoReason,s)||(i.rechazoReason=s),s}),l()()(),c(5,"div",4)(6,"button",5),u("click",function(){return i.onCancel()}),d(7,"Cancelar"),l(),c(8,"button",5),u("click",function(){return i.onConfirm()}),d(9,"Confirmar"),l()()),e&2&&(p(4),I("ngModel",i.rechazoReason))},dependencies:[J,q,K,Y,tt,Z,X,Q,E,y,k,$,B,U,H,G],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var Ie=["*"],mt;function Fe(){if(mt===void 0&&(mt=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(mt=n.trustedTypes.createPolicy("angular#components",{createHTML:o=>o}))}return mt}function ot(n){return Fe()?.createHTML(n)||n}function de(n){return Error(`Unable to find icon with the name "${n}"`)}function we(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function me(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function pe(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var D=class{constructor(o,r,t){this.url=o,this.svgText=r,this.options=t}},Te=(()=>{let o=class o{constructor(t,e,i,a){this._httpClient=t,this._sanitizer=e,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,e,i){return this.addSvgIconInNamespace("",t,e,i)}addSvgIconLiteral(t,e,i){return this.addSvgIconLiteralInNamespace("",t,e,i)}addSvgIconInNamespace(t,e,i,a){return this._addSvgIconConfig(t,e,new D(i,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,i,a){let s=this._sanitizer.sanitize(j.HTML,i);if(!s)throw pe(i);let f=ot(s);return this._addSvgIconConfig(t,e,new D("",f,a))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,i){return this._addSvgIconSetConfig(t,new D(e,null,i))}addSvgIconSetLiteralInNamespace(t,e,i){let a=this._sanitizer.sanitize(j.HTML,e);if(!a)throw pe(e);let s=ot(a);return this._addSvgIconSetConfig(t,new D("",s,i))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let e=this._sanitizer.sanitize(j.RESOURCE_URL,t);if(!e)throw me(t);let i=this._cachedIconsByUrl.get(e);return i?N(pt(i)):this._loadSvgIconFromConfig(new D(t,null)).pipe(rt(a=>this._cachedIconsByUrl.set(e,a)),L(a=>pt(a)))}getNamedSvgIcon(t,e=""){let i=ue(e,t),a=this._svgIconConfigs.get(i);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(e,t),a)return this._svgIconConfigs.set(i,a),this._getSvgFromConfig(a);let s=this._iconSetConfigs.get(e);return s?this._getSvgFromIconSetConfigs(t,s):ht(de(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?N(pt(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(L(e=>pt(e)))}_getSvgFromIconSetConfigs(t,e){let i=this._extractIconWithNameFromAnySet(t,e);if(i)return N(i);let a=e.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(vt(f=>{let V=`Loading icon set URL: ${this._sanitizer.sanitize(j.RESOURCE_URL,s.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(V)),N(null)})));return Ct(a).pipe(L(()=>{let s=this._extractIconWithNameFromAnySet(t,e);if(!s)throw de(t);return s}))}_extractIconWithNameFromAnySet(t,e){for(let i=e.length-1;i>=0;i--){let a=e[i];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(a),f=this._extractSvgIconFromSet(s,t,a.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(rt(e=>t.svgText=e),L(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?N(null):this._fetchIcon(t).pipe(rt(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,i){let a=t.querySelector(`[id="${e}"]`);if(!a)return null;let s=a.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let f=this._svgElementFromString(ot("<svg></svg>"));return f.appendChild(s),this._setSvgAttributes(f,i)}_svgElementFromString(t){let e=this._document.createElement("DIV");e.innerHTML=t;let i=e.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){let e=this._svgElementFromString(ot("<svg></svg>")),i=t.attributes;for(let a=0;a<i.length;a++){let{name:s,value:f}=i[a];s!=="id"&&e.setAttribute(s,f)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[a].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){let{url:e,options:i}=t,a=i?.withCredentials??!1;if(!this._httpClient)throw we();if(e==null)throw Error(`Cannot fetch icon from URL "${e}".`);let s=this._sanitizer.sanitize(j.RESOURCE_URL,e);if(!s)throw me(e);let f=this._inProgressUrlFetches.get(s);if(f)return f;let O=this._httpClient.get(s,{responseType:"text",withCredentials:a}).pipe(L(V=>ot(V)),Mt(()=>this._inProgressUrlFetches.delete(s)),St());return this._inProgressUrlFetches.set(s,O),O}_addSvgIconConfig(t,e,i){return this._svgIconConfigs.set(ue(t,e),i),this}_addSvgIconSetConfig(t,e){let i=this._iconSetConfigs.get(t);return i?i.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){let e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let i=0;i<this._resolvers.length;i++){let a=this._resolvers[i](e,t);if(a)return ye(a)?new D(a.url,null,a.options):new D(a,null)}}};o.\u0275fac=function(e){return new(e||o)(it(Bt,8),it(Ut),it(_t,8),it(st))},o.\u0275prov=It({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();function pt(n){return n.cloneNode(!0)}function ue(n,o){return n+":"+o}function ye(n){return!!(n.url&&n.options)}var Ee=new ut("MAT_ICON_DEFAULT_OPTIONS"),be=new ut("mat-icon-location",{providedIn:"root",factory:De});function De(){let n=wt(_t),o=n?n.location:null;return{getPathname:()=>o?o.pathname+o.search:""}}var _e=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Re=_e.map(n=>`[${n}]`).join(", "),ke=/^url\(['"]?#(.*?)['"]?\)$/,fe=(()=>{let o=class o{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}constructor(t,e,i,a,s,f){this._elementRef=t,this._iconRegistry=e,this._location=a,this._errorHandler=s,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=gt.EMPTY,f&&(f.color&&(this.color=this._defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){let i=t.childNodes[e];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,e=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),e.forEach(i=>t.classList.add(i)),this._previousFontSetClass=e,this.fontIcon!==this._previousFontIconClass&&!e.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let e=this._elementsWithExternalReferences;e&&e.forEach((i,a)=>{i.forEach(s=>{a.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let e=t.querySelectorAll(Re),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<e.length;a++)_e.forEach(s=>{let f=e[a],O=f.getAttribute(s),V=O?O.match(ke):null;if(V){let at=i.get(f);at||(at=[],i.set(f,at)),at.push({name:s,value:V[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[e,i]=this._splitIconName(t);e&&(this._svgNamespace=e),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,e).pipe(xt(1)).subscribe(a=>this._setSvgElement(a),a=>{let s=`Error retrieving icon ${e}:${i}! ${a.message}`;this._errorHandler.handleError(new Error(s))})}}};o.\u0275fac=function(e){return new(e||o)(_(bt),_(Te),Et("aria-hidden"),_(be),_(st),_(Ee,8))},o.\u0275cmp=C({type:o,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(e,i){e&2&&(Rt("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Pt(i.color?"mat-"+i.color:""),kt("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[Tt.HasDecoratorInputTransform,"inline","inline",Lt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Dt,v],ngContentSelectors:Ie,decls:1,vars:0,template:function(e,i){e&1&&(Vt(),Nt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=o;return n})(),ge=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=yt({type:o}),o.\u0275inj=Ft({imports:[ft,ft]});let n=o;return n})();function ze(n,o){if(n&1){let r=x();c(0,"button",16),u("click",function(){g(r);let e=m().index,i=m();return h(i.removeDatoDinamico(e))}),c(1,"mat-icon"),d(2,"remove_circle"),l()()}}function Oe(n,o){if(n&1){let r=x();c(0,"div")(1,"mat-form-field",2)(2,"input",13),w("ngModelChange",function(e){let i=g(r).$implicit;return F(i.key,e)||(i.key=e),h(e)}),l()(),c(3,"mat-form-field",2)(4,"input",14),w("ngModelChange",function(e){let i=g(r).$implicit;return F(i.value,e)||(i.value=e),h(e)}),l()(),b(5,ze,3,0,"button",15),l()}if(n&2){let r=o.$implicit,t=m();p(2),I("ngModel",r.key),p(2),I("ngModel",r.value),p(),R("ngIf",t.datosDinamicos.length>1)}}function Ve(n,o){if(n&1){let r=x();c(0,"button",17),u("click",function(){g(r);let e=m();return h(e.addDatoDinamico())}),d(1,"Agregar Dato Din\xE1mico"),l()}}var he=(()=>{let o=class o{constructor(t,e,i){this.dialogRef=t,this.data=e,this.toast=i,this.resenia="",this.altura=null,this.peso=null,this.temperatura=null,this.presion="",this.datosDinamicos=[{key:"",value:""}]}onConfirm(){if(this.resenia!==""&&this.altura!==null&&this.peso!==null&&this.temperatura!==null&&this.presion!==""){let t={fecha:this.data.turno.fecha,altura:this.altura,peso:this.peso,temperatura:this.temperatura,presion:this.presion,datosDinamicos:this.datosDinamicos.filter(e=>e.key!==""&&e.value!=="")};this.dialogRef.close({historiaClinica:t,resenia:this.resenia})}else this.toast.error("Los campos de rese\xF1a, altura, peso, tempratura y presi\xF3n son obligatorios")}onCancel(){this.dialogRef.close()}addDatoDinamico(){this.datosDinamicos.length<3&&this.datosDinamicos.push({key:"",value:""})}removeDatoDinamico(t){this.datosDinamicos.length>1&&this.datosDinamicos.splice(t,1)}};o.\u0275fac=function(e){return new(e||o)(_(T),_(P),_(dt))},o.\u0275cmp=C({type:o,selectors:[["app-finalizar-turno-dialog"]],standalone:!0,features:[v],decls:21,vars:7,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Deje un diagn\xF3stico como rese\xF1a","rows","5",3,"ngModelChange","ngModel"],["matInput","","placeholder","Altura (cm)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Peso (kg)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Temperatura (\xB0C)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Presi\xF3n",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text","btn","btn-danger",3,"click"],["mat-button","",1,"dialog-text","btn","btn-success",3,"click"],["matInput","","placeholder","Clave dato din\xE1mico",3,"ngModelChange","ngModel"],["matInput","","placeholder","Valor dato din\xE1mico",3,"ngModelChange","ngModel"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["mat-button","",3,"click"]],template:function(e,i){e&1&&(c(0,"h1",0),d(1,"Finalizar Turno"),l(),W(2,"br"),c(3,"div",1)(4,"mat-form-field",2)(5,"textarea",3),w("ngModelChange",function(s){return F(i.resenia,s)||(i.resenia=s),s}),l()(),c(6,"mat-form-field",2)(7,"input",4),w("ngModelChange",function(s){return F(i.altura,s)||(i.altura=s),s}),l()(),c(8,"mat-form-field",2)(9,"input",5),w("ngModelChange",function(s){return F(i.peso,s)||(i.peso=s),s}),l()(),c(10,"mat-form-field",2)(11,"input",6),w("ngModelChange",function(s){return F(i.temperatura,s)||(i.temperatura=s),s}),l()(),c(12,"mat-form-field",2)(13,"input",7),w("ngModelChange",function(s){return F(i.presion,s)||(i.presion=s),s}),l()(),b(14,Oe,6,3,"div",8)(15,Ve,2,0,"button",9),l(),c(16,"div",10)(17,"button",11),u("click",function(){return i.onCancel()}),d(18,"Cancelar"),l(),c(19,"button",12),u("click",function(){return i.onConfirm()}),d(20,"Guardar"),l()()),e&2&&(p(5),I("ngModel",i.resenia),p(2),I("ngModel",i.altura),p(2),I("ngModel",i.peso),p(2),I("ngModel",i.temperatura),p(2),I("ngModel",i.presion),p(),R("ngForOf",i.datosDinamicos),p(),R("ngIf",i.datosDinamicos.length<3))},dependencies:[J,q,K,Y,ge,fe,tt,Z,X,Q,E,y,Xt,k,jt,Wt,$,B,Kt,U,H,G],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;padding-top:40px;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var Ce=(()=>{let o=class o{constructor(t,e){this.dialogRef=t,this.data=e}onClose(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T),_(P))},o.\u0275cmp=C({type:o,selectors:[["app-show-motivo-rechazo-dialog"]],standalone:!0,features:[v],decls:8,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(c(0,"h1",0),d(1,"Motivo de Rechazo"),l(),c(2,"div",1)(3,"p"),d(4),l()(),c(5,"div",2)(6,"button",3),u("click",function(){return i.onClose()}),d(7,"Ok"),l()()),e&2&&(p(4),M(i.data.motivo))},dependencies:[E,y],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;height:100px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var ve=(()=>{let o=class o{constructor(t,e){this.dialogRef=t,this.data=e}onClose(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T),_(P))},o.\u0275cmp=C({type:o,selectors:[["app-show-resenia-dialog"]],standalone:!0,features:[v],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],[1,"text-center"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(c(0,"h1",0),d(1,"Rese\xF1a"),l(),c(2,"div",1)(3,"h3",2),d(4,"Diagn\xF3stico"),l(),c(5,"p"),d(6),l()(),c(7,"div",3)(8,"button",4),u("click",function(){return i.onClose()}),d(9,"Ok"),l()()),e&2&&(p(6),M(i.data.resenia))},dependencies:[E,y],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var xe=(()=>{let o=class o{constructor(t){this.dialogRef=t,this.calificacion=""}onConfirm(){this.calificacion!=""&&this.dialogRef.close(this.calificacion)}onCancel(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T))},o.\u0275cmp=C({type:o,selectors:[["app-calificacion-encuesta-dialog"]],standalone:!0,features:[v],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Califique a su especialista","rows","5",3,"ngModelChange","ngModel"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(c(0,"h1",0),d(1,"Encuesta"),l(),c(2,"div",1)(3,"mat-form-field",2)(4,"textarea",3),w("ngModelChange",function(s){return F(i.calificacion,s)||(i.calificacion=s),s}),l()()(),c(5,"div",4)(6,"button",5),u("click",function(){return i.onCancel()}),d(7,"Cancelar"),l(),c(8,"button",5),u("click",function(){return i.onConfirm()}),d(9,"Confirmar"),l()()),e&2&&(p(4),I("ngModel",i.calificacion))},dependencies:[J,q,K,Y,tt,Z,X,Q,E,y,k,$,B,U,H,G],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var Me=(()=>{let o=class o{constructor(t,e){this.dialogRef=t,this.data=e}onClose(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T),_(P))},o.\u0275cmp=C({type:o,selectors:[["app-show-calificacion-encuesta-dialog"]],standalone:!0,features:[v],decls:8,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(c(0,"h1",0),d(1,"Calificaci\xF3n de la Encuesta"),l(),c(2,"div",1)(3,"p"),d(4),l()(),c(5,"div",2)(6,"button",3),u("click",function(){return i.onClose()}),d(7,"Ok"),l()()),e&2&&(p(4),M(i.data.calificacion))},dependencies:[E,y],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;height:100px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();function Ne(n,o){if(n&1&&W(0,"app-spinner",3),n&2){let r=m();R("loading",r.loading)}}function Le(n,o){n&1&&(c(0,"th",7),d(1,"Especialista"),l())}function je(n,o){n&1&&(c(0,"th",7),d(1,"Paciente"),l())}function We(n,o){n&1&&(c(0,"td",10),d(1,"No se encontraron resultados"),l())}function Be(n,o){if(n&1){let r=x();c(0,"td",13),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.setFilter("especialista",e.especialistaId))}),d(1),l()}if(n&2){let r=m().$implicit,t=m(3);p(),M(t.userMap[r.especialistaId])}}function Ue(n,o){if(n&1){let r=x();c(0,"td",13),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.setFilter("paciente",e.pacienteId))}),d(1),l()}if(n&2){let r=m().$implicit,t=m(3);p(),M(t.userMap[r.pacienteId])}}function He(n,o){if(n&1){let r=x();c(0,"button",17),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.changeState(e,"confirmado"))}),d(1," Aceptar "),l(),c(2,"button",18),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.changeState(e,"rechazado"))}),d(3," Rechazar "),l()}}function $e(n,o){if(n&1){let r=x();c(0,"button",16),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.changeState(e,"cancelado"))}),d(1," Cancelar "),l(),b(2,He,4,0)}if(n&2){let r=m(4);p(2),S(2,r.currentRol=="especialista"?2:-1)}}function Ge(n,o){if(n&1){let r=x();c(0,"button",19),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.showMotivo(e))}),d(1," Ver motivo "),l()}}function qe(n,o){if(n&1){let r=x();c(0,"button",19),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.showMotivo(e))}),d(1," Ver motivo "),l()}}function Ye(n,o){if(n&1){let r=x();c(0,"button",20),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.changeState(e,"finalizado"))}),d(1," Finalizar "),l()}}function Ke(n,o){if(n&1){let r=x();c(0,"button",20),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.completarEncuesta(e))}),d(1," Completar Encuesta "),l()}}function Je(n,o){if(n&1){let r=x();c(0,"button",20),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.showEncuesta(e))}),d(1," Ver Calificaci\xF3n "),l()}}function Xe(n,o){if(n&1){let r=x();c(0,"button",19),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.showMotivo(e))}),d(1," Ver rese\xF1a "),l(),b(2,Ke,2,0,"button",21)(3,Je,2,0,"button",21)}if(n&2){let r=m().$implicit,t=m(3);p(2),S(2,t.currentRol=="paciente"&&r.comentario==""?2:-1),p(),S(3,r.comentario!=""?3:-1)}}function Qe(n,o){}function Ze(n,o){if(n&1){let r=x();c(0,"tr",6)(1,"td"),d(2),lt(3,"capitalizeFirstLetterPipe"),l(),c(4,"td"),d(5),lt(6,"setFechaWithSlashes"),l(),c(7,"td"),d(8),lt(9,"horariosAmPmFormat"),l(),b(10,Be,2,1,"td",12)(11,Ue,2,1,"td",12),c(12,"td",13),u("click",function(){let e=g(r).$implicit,i=m(3);return h(i.setFilter("especialidad",e.especialidad))}),d(13),l(),c(14,"td",14),d(15),l(),c(16,"td")(17,"div",15),b(18,$e,3,1)(19,Ge,2,0)(20,qe,2,0)(21,Ye,2,0)(22,Xe,4,2)(23,Qe,0,0),l()()()}if(n&2){let r=o.$implicit,t=m(3);p(2),M(ct(3,9,r.fecha.dayName)),p(3),M(ct(6,11,r.fecha.fecha)),p(3),M(ct(9,13,r.fecha.timeSlot.time)),p(2),S(10,t.currentRol!="especialista"?10:-1),p(),S(11,t.currentRol!="paciente"?11:-1),p(2),M(r.especialidad),p(2),M(r.estado),p(3),S(18,r.estado=="pendiente"?18:r.estado=="cancelado"?19:r.estado=="rechazado"?20:r.estado=="confirmado"?21:r.estado=="finalizado"&&r.resenia!=""?22:-1),p(5),S(23,r.comentario!=""||r.resenia!=""?23:-1)}}function ti(n,o){if(n&1&&zt(0,Ze,24,15,"tr",6,At),n&2){let r=m(2);Ot(r.pagedTurnos)}}function ei(n,o){if(n&1){let r=x();c(0,"app-listado-filtros",4),u("filterApplied",function(e){g(r);let i=m();return h(i.onFilterApplied(e))})("filtersCleared",function(){g(r);let e=m();return h(e.onFiltersCleared())}),l(),c(1,"table",5)(2,"thead")(3,"tr",6)(4,"th",7),d(5,"D\xEDa"),l(),c(6,"th",7),d(7,"Fecha"),l(),c(8,"th",7),d(9,"Horario"),l(),b(10,Le,2,0,"th",7)(11,je,2,0,"th",7),c(12,"th",7),d(13,"Especialidad"),l(),c(14,"th",8),d(15,"Estado"),l(),c(16,"th",9),d(17,"Modificar Estado"),l()()(),c(18,"tbody"),b(19,We,2,0,"td",10)(20,ti,2,0),l()(),c(21,"app-paginacion",11),u("pageChanged",function(e){g(r);let i=m();return h(i.setPage(e))}),l()}if(n&2){let r=m();R("currentRol",r.currentRol)("turnos",r.turnos)("filteredTurnos",r.filteredTurnos)("userMap",r.userMap)("especialidadFilter",r.especialidadFilter)("especialistaFilter",r.especialistaFilter)("pacienteFilter",r.pacienteFilter),p(10),S(10,r.currentRol!="especialista"?10:-1),p(),S(11,r.currentRol!="paciente"?11:-1),p(8),S(19,(r.pagedTurnos==null?null:r.pagedTurnos.length)===0||(r.turnos==null?null:r.turnos.length)==0||!r.turnos?19:20),p(2),R("currentPage",r.currentPage)("totalPages",r.totalPages)}}var Se=(()=>{let o=class o{constructor(t,e,i,a,s){this.userService=t,this.loginService=e,this.turnoService=i,this.toast=a,this.dialog=s,this.loading=!0,this.currentRol="",this.mySelf=null,this.pacientes=[],this.medicos=[],this.turnos=[],this.filteredTurnos=[],this.userMap={},this.currentPage=1,this.pageSize=10,this.especialidadFilter="",this.especialistaFilter="",this.pacienteFilter=""}ngOnInit(){this.getData()}getTurno(t){console.log(t)}getData(){return z(this,null,function*(){try{let t=this.loginService.getLoggedUser();if(this.mySelf=yield this.userService.getUserByEmail(t),this.currentRol=this.mySelf?.rol,this.currentRol=="paciente"?this.turnos=yield this.turnoService.getTurnosFromPaciente(t):this.currentRol=="especialista"&&(this.turnos=yield this.turnoService.getTurnosFromEspecialista(t)),this.filteredTurnos=this.turnos,this.turnos&&this.turnos.length>0)for(let e of this.turnos)this.userMap[e.especialistaId]||(this.userMap[e.especialistaId]=yield this.userService.getNameAndSurnameByEmail(e.especialistaId)),this.userMap[e.pacienteId]||(this.userMap[e.pacienteId]=yield this.userService.getNameAndSurnameByEmail(e.pacienteId))}catch(t){console.log(t)}finally{this.loading=!1}})}completarEncuesta(t){this.dialog.open(xe,{width:"400px",data:{calificacion:""}})?.afterClosed().subscribe(i=>z(this,null,function*(){i&&(t.comentario=i,yield this.turnoService.update(t))}))}showEncuesta(t){let e=t.comentario;t.estado=="finalizado"&&this.dialog.open(Me,{width:"400px",data:{calificacion:e}})}setFilter(t,e){t==="especialidad"?this.especialidadFilter=e:t==="especialista"?this.especialistaFilter=this.userMap[e]:t=="paciente"&&(this.pacienteFilter=this.userMap[e])}onFilterApplied(t){this.especialidadFilter=t.especialidadFilter,this.especialistaFilter=t.especialistaFilter,this.pacienteFilter=t.pacienteFilter,this.applyFilters()}onFiltersCleared(){this.especialidadFilter="",this.especialistaFilter="",this.filteredTurnos=this.turnos}applyFilters(){this.filteredTurnos=this.turnos?.filter(t=>{let e=this.especialidadFilter?t.especialidad.includes(this.especialidadFilter):!0,i=this.especialistaFilter?this.userMap[t.especialistaId].includes(this.especialistaFilter):!0,a=this.pacienteFilter?this.userMap[t.pacienteId].includes(this.pacienteFilter):!0;return e&&i&&a})}changeState(t,e){return z(this,null,function*(){let i=null;e=="cancelado"&&(i=this.dialog.open(ne,{width:"400px",data:{motivo:""}})),e=="rechazado"&&(i=this.dialog.open(ce,{width:"400px",data:{motivo:""}})),(e=="cancelado"||e=="rechazado")&&i?.afterClosed().subscribe(a=>z(this,null,function*(){a&&(t.estado=e,t.comentario=a,t.fecha.timeSlot.estaDisponible=!0,yield this.turnoService.update(t))})),e=="confirmado"&&(this.toast.success("Turno confirmado!"),t.estado=e,yield this.turnoService.update(t)),e=="finalizado"&&(i=this.dialog.open(he,{width:"400px",data:{turno:t}}),i?.afterClosed().subscribe(a=>z(this,null,function*(){a&&(t.estado=e,t.resenia=a.resenia,yield this.cargarHistoriaClinica(t,a.historiaClinica),yield this.turnoService.update(t))})))})}cargarHistoriaClinica(t,e){return z(this,null,function*(){if(t&&t.estado==="finalizado"){let i=yield this.userService.getUserByEmail(t.pacienteId);i.historiaClinica=i.historiaClinica?.filter(a=>a&&Object.keys(a).length>0)||[],i.historiaClinica?i.historiaClinica.push(e):i.historiaClinica=[e],yield this.userService.update(i)}})}showMotivo(t){let e=t.comentario;if(t.estado=="cancelado"&&this.dialog.open(oe,{width:"400px",data:{motivo:e}}),t.estado=="rechazado"&&this.dialog.open(Ce,{width:"400px",data:{motivo:e}}),t.estado=="finalizado"){let i=t.resenia;this.dialog.open(ve,{width:"400px",data:{resenia:i}})}}get pagedTurnos(){let t=(this.currentPage-1)*this.pageSize;return this.filteredTurnos?.slice(t,t+this.pageSize)}get totalPages(){return this.filteredTurnos?Math.ceil(this.filteredTurnos.length/this.pageSize):0}setPage(t){this.currentPage=t}};o.\u0275fac=function(e){return new(e||o)(_($t),_(Ht),_(ie),_(dt),_(Jt))},o.\u0275cmp=C({type:o,selectors:[["app-mis-turnos"]],standalone:!0,features:[v],decls:5,vars:1,consts:[[1,"container-fluid"],[1,"container","mt-4"],[1,"row","container"],[3,"loading"],[3,"filterApplied","filtersCleared","currentRol","turnos","filteredTurnos","userMap","especialidadFilter","especialistaFilter","pacienteFilter"],[1,"table","table-striped","table-light","container"],[1,"text-center"],["scope","col"],["scope","col",2,"width","120px"],["scope","col",1,"td-modify-state"],["colspan","8",1,"td-no-results"],[3,"pageChanged","currentPage","totalPages"],[1,"td-clickeable"],[1,"td-clickeable",3,"click"],[2,"width","120px"],[1,"td-modify-state"],[1,"btn","btn-dark",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary"]],template:function(e,i){e&1&&(c(0,"div",0)(1,"div",1)(2,"div",2),b(3,Ne,1,1,"app-spinner",3)(4,ei,22,12),l()()()),e&2&&(p(3),S(3,i.loading?3:4))},dependencies:[k,Yt,ae,Qt,ee,te,Zt],styles:['.container-fluid[_ngcontent-%COMP%]{height:90vh;background-color:#6ad8d4;background-image:url("./media/main_fondo-S2RK2XML.png");background-size:250px 250px;background-repeat:repeat;background-position:center;padding:20px}.mt-4[_ngcontent-%COMP%]{background-color:#add8e6;height:800px}table[_ngcontent-%COMP%]{margin-top:1em}.td-modify-state[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly;align-items:center}.td-clickeable[_ngcontent-%COMP%]:hover{opacity:.6;cursor:pointer}.td-no-results[_ngcontent-%COMP%]{background-color:#fff;text-align:center;font-size:medium;padding-top:1em;padding-bottom:1em}']});let n=o;return n})();var Sn=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=C({type:o,selectors:[["app-mis-turnos-container"]],standalone:!0,features:[v],decls:4,vars:0,consts:[[1,"container-fluid","m-0","p-0"]],template:function(e,i){e&1&&(c(0,"div",0),W(1,"app-navbar")(2,"app-mis-turnos")(3,"app-footer"),l())},dependencies:[Se,Gt,qt]});let n=o;return n})();export{Sn as MisTurnosContainerComponent};
