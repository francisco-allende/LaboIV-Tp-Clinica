import{a as ie,b as ne,c as oe}from"./chunk-ZGC33XT2.js";import{a as Z,b as ee,c as te}from"./chunk-E4VBJUJN.js";import{a as M}from"./chunk-GSNWQ4FR.js";import{a as ae}from"./chunk-AT26J2S3.js";import{a as re}from"./chunk-JUDL6ATC.js";import{a as W}from"./chunk-XVUSDMUC.js";import{h as J,i as q,l as K,m as Q,o as X,r as Y}from"./chunk-KIGVSZDZ.js";import{E as G}from"./chunk-CC3LA27V.js";import{s as U}from"./chunk-FSRSBQOR.js";import{H as R}from"./chunk-UUFXAH3U.js";import{$a as j,Ab as $,Db as C,Eb as _,Mb as c,Ob as S,Pb as I,Qb as A,Sb as L,Tb as O,Ua as p,Ub as N,Va as h,Wb as z,Zb as f,_b as x,ga as T,ia as H,kb as D,mb as B,qa as u,ra as g,rb as P,sb as v,tb as b,ub as E,vb as l,wb as s,xb as V,ya as k}from"./chunk-TDWWCWZI.js";import{h as F}from"./chunk-DLDOR3YA.js";function pe(n,r){if(n&1&&(l(0,"p"),c(1),f(2,"capitalizeFirstLetterPipe"),f(3,"capitalizeFirstLetterPipe"),s()),n&2){let i=r.$implicit;p(),I("",x(2,2,i.key),": ",x(3,4,i.value),"")}}function me(n,r){if(n&1&&(l(0,"h4"),c(1,"Datos Adicionales"),s(),b(2,pe,4,6,"p",null,v)),n&2){let i=_().$implicit;p(2),E(i.datosDinamicos)}}function de(n,r){if(n&1&&(l(0,"p"),c(1),f(2,"capitalizeFirstLetterPipe"),f(3,"setFechaWithSlashes"),f(4,"horariosAmPmFormat"),s(),l(5,"p"),c(6),s(),l(7,"p"),c(8),s(),l(9,"p"),c(10),s(),l(11,"p"),c(12),f(13,"capitalizeFirstLetterPipe"),s(),D(14,me,4,0),l(15,"p"),c(16,"-------------------------------------------------------------"),s()),n&2){let i=r.$implicit;p(),A(" ",x(2,8,i.fecha.dayName)," ",x(3,10,i.fecha.fecha)," ",x(4,12,i.fecha.timeSlot.time)," "),p(5),S("Altura: ",i.altura," cm"),p(2),S("Peso: ",i.peso," kg"),p(2),S("Temperatura: ",i.temperatura," \xB0C"),p(2),S("Presi\xF3n: ",x(13,14,i.presion),""),p(2),P(14,i.datosDinamicos&&i.datosDinamicos.length>0?14:-1)}}function he(n,r){if(n&1&&(l(0,"mat-option",8),c(1),s()),n&2){let i=r.$implicit;B("value",i),p(),I(" ",i.nombre," ",i.apellido," ")}}function _e(n,r){if(n&1){let i=$();l(0,"h2",0),c(1,"Historia Cl\xEDnica"),s(),l(2,"mat-dialog-content",1),V(3,"br"),b(4,de,17,16,null,null,v),l(6,"div",2)(7,"div",3)(8,"button",4),C("click",function(){u(i);let a=_();return g(a.descargarHistoriaPDF())}),l(9,"mat-icon"),c(10,"download"),s(),c(11," Descargar PDF Historia "),s()(),l(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),c(15,"Seleccione un especialista"),s(),l(16,"mat-select",7),N("valueChange",function(a){u(i);let e=_();return O(e.especialistaSeleccionado,a)||(e.especialistaSeleccionado=a),g(a)}),b(17,he,2,3,"mat-option",8,v),s()(),l(19,"button",9),C("click",function(){u(i);let a=_();return g(a.descargarPorEspecialistaPDF())}),l(20,"mat-icon"),c(21,"download"),s(),c(22," PDF Historia por especialista "),s()(),l(23,"div",3)(24,"button",10),C("click",function(){u(i);let a=_();return g(a.onClose())}),c(25,"Cerrar"),s()()()()}if(n&2){let i=_();p(4),E(i.paciente.historiaClinica),p(12),L("value",i.especialistaSeleccionado),p(),E(i.especialistas)}}function fe(n,r){if(n&1){let i=$();l(0,"h2",11),c(1,"No hay historia cl\xEDnica disponible."),s(),l(2,"div",2)(3,"button",10),C("click",function(){u(i);let a=_();return g(a.onClose())}),c(4,"Ok"),s()()}}var He=(()=>{let r=class r{constructor(t,a,e,w,m){this.dialogRef=t,this.paciente=a,this.userService=e,this.turnosService=w,this.toast=m,this.especialistas=[],this.loadEspecialistas()}onClose(){this.dialogRef.close()}loadEspecialistas(){return F(this,null,function*(){this.especialistas=yield this.userService.getAllEnabledUsersByRol("especialista"),console.log(this.especialistas)})}descargarHistoriaPDF(){let t=new M,a=new Date,e=20,w=t.internal.pageSize.height-10;t.addImage("../../../../assets/logo.png","PNG",150,10,50,50),t.text(`Fecha de creaci\xF3n: ${a.toLocaleDateString("es-ES")}`,10,e),e+=10,t.text(`Nombre del paciente: ${this.paciente.nombre} ${this.paciente.apellido}`,10,e),e+=10,t.text(`DNI: ${this.paciente.dni}`,10,e),e+=10,t.text(`Obra Social: ${this.paciente.obraSocial||"-"}`,10,e),e+=10,e+=10,t.text("Historia Cl\xEDnica:",10,e),e+=10,this.paciente.historiaClinica&&this.paciente.historiaClinica.length>0?this.paciente.historiaClinica.forEach(m=>{t.text(`Fecha: ${m.fecha.fecha}`,15,e),e+=10,t.text(`Altura: ${m.altura} cm`,15,e),e+=10,t.text(`Peso: ${m.peso} kgs`,15,e),e+=10,t.text(`Temperatura: ${m.temperatura} \xBAC`,15,e),e+=10,t.text(`Presi\xF3n: ${m.presion}`,15,e),e+=10,m.datosDinamicos&&m.datosDinamicos.length>0&&(t.text("Datos Din\xE1micos:",15,e),e+=10,m.datosDinamicos.forEach(o=>{t.text(`${o.key}: ${o.value}`,20,e),e+=10})),e+=20}):(t.text("No hay datos de historia cl\xEDnica disponibles.",15,e),e+=10),t.save(`Historia_Clinica_${this.paciente.nombre}_${this.paciente.apellido}.pdf`)}descargarPorEspecialistaPDF(){return F(this,null,function*(){let a=(yield this.turnosService.getTurnosFromPaciente(this.paciente.email))?.filter(d=>d.especialistaId===this.especialistaSeleccionado?.email);if(a?.length===0){this.toast.info("No hay turnos con el especialista seleccionado");return}let e=new M;e.addImage("../../../../assets/logo.png","JPEG",10,10,50,30),e.setFontSize(18),e.text("Informe de Historia Cl\xEDnica por Especialista",70,20);let m=new Date().toLocaleDateString();e.setFontSize(12),e.text(`Fecha de emisi\xF3n: ${m}`,70,30);let o=50;e.text(`Nombre Paciente: ${this.paciente.nombre} ${this.paciente.apellido}`,10,o),o+=10,e.text(`DNI: ${this.paciente.dni}`,10,o),o+=10,e.text(`Obra Social: ${this.paciente.obraSocial||"-"}`,10,o),o+=20,e.text("Turnos:",10,o),o+=10,a?.forEach(d=>{let y=this.especialistas?.find(se=>se.email===d.especialistaId),le=y?`${y.nombre} ${y.apellido}`:"Desconocido";e.text(`Fecha: ${d.fecha.fecha}`,10,o),o+=10,e.text(`Especialista: ${le}`,10,o),o+=10,e.text(`Especialialidad: ${d.especialidad}`,10,o),o+=10,e.text(`Estado del turno: ${d.estado}`,10,o),o+=10,d.comentario!=""&&(e.text(`Comentario del paciente: ${d.comentario}`,10,o),o+=10),d.resenia!=""&&(e.text(`Diagn\xF3stico: ${d.resenia}`,10,o),o+=10),o+=10}),e.save(`Historia_Clinica_${this.paciente.nombre}_${this.paciente.apellido}_Especialista_${this.especialistaSeleccionado?.nombre}_${this.especialistaSeleccionado?.apellido}.pdf`)})}};r.\u0275fac=function(a){return new(a||r)(h(J),h(q),h(W),h(re),h(R))},r.\u0275cmp=T({type:r,selectors:[["app-show-historia-clinica"]],standalone:!0,features:[z],decls:2,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],[1,"dialog-content"],["mat-dialog-actions","",1,"dialog-actions"],[1,"dialog-button-row"],["mat-button","",1,"text-center","btn","btn-success",3,"click"],[1,"dialog-button-row","d-flex","justify-content-evenly"],["appearance","fill",1,"me-3"],[3,"valueChange","value"],[3,"value"],["mat-button","",1,"btn","btn-dark",2,"height","45px","margin-top","0.5em",3,"click"],["mat-button","",1,"text-center","btn","btn-primary",3,"click"],[1,"text-center",2,"padding","1em"]],template:function(a,e){a&1&&D(0,_e,26,1)(1,fe,5,0),a&2&&P(0,e.paciente.historiaClinica&&e.paciente.historiaClinica.length>0?0:1)},dependencies:[G,oe,Y,X,ne,U,ae,ie,te,ee,Z,K,Q],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;color:#000;overflow-y:auto}.dialog-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-bottom:1em}.my-divider[_ngcontent-%COMP%]{border-top:1px solid #ccc;margin:10px 0}.dialog-button-row[_ngcontent-%COMP%]{margin-bottom:1em}"]});let n=r;return n})();var Be=(()=>{let r=class r{constructor(t,a){this.el=t,this.renderer=a,this.setStyle()}setStyle(){let t={"border-radius":"50%",width:"200px",height:"200px","object-fit":"cover","margin-top":"1em","margin-bottom":"2em"};this.renderer.setStyle(this.el.nativeElement,"border-radius",t["border-radius"]),this.renderer.setStyle(this.el.nativeElement,"width",t.width),this.renderer.setStyle(this.el.nativeElement,"height",t.height),this.renderer.setStyle(this.el.nativeElement,"object-fit",t["object-fit"]),this.renderer.setStyle(this.el.nativeElement,"margin-top",t["margin-top"]),this.renderer.setStyle(this.el.nativeElement,"margin-bottom",t["margin-bottom"])}};r.\u0275fac=function(a){return new(a||r)(h(k),h(j))},r.\u0275dir=H({type:r,selectors:[["","appRoundedImg",""]],standalone:!0});let n=r;return n})();export{He as a,Be as b};
