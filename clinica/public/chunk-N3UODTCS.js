import{a as Mt,b as Tt,c as St}from"./chunk-HQKNGG3I.js";import{a as wt,b as Ft}from"./chunk-G5C6YSKJ.js";import{a as _t}from"./chunk-Q7SOMD2X.js";import{a as gt,b as ft,c as Ct}from"./chunk-E4VBJUJN.js";import{a as Y,b as ht}from"./chunk-AT26J2S3.js";import{a as xt}from"./chunk-QHILSBCE.js";import{a as st,b as ct}from"./chunk-XS3MNTZJ.js";import{a as dt}from"./chunk-DEDYB2T4.js";import{a as lt}from"./chunk-ZHVU5HJQ.js";import{a as H,b as U}from"./chunk-XW2RAFPW.js";import{a as z,b as ut,c as R}from"./chunk-HUVKKSNT.js";import{h as P,i as Q,j as pt,k as A,l as B,m as j,n as L,r as N,s as G}from"./chunk-KIGVSZDZ.js";import"./chunk-CC3LA27V.js";import"./chunk-7XIEKY6O.js";import{a as E,d as k,g as I,i as mt,s as V,t as W}from"./chunk-FSRSBQOR.js";import{a as rt}from"./chunk-4YPGSVQN.js";import{P as J}from"./chunk-KOE6HBMH.js";import"./chunk-IX6G3U3V.js";import"./chunk-2URDVIT7.js";import{Ab as C,Db as u,Eb as c,Mb as s,Nb as y,Sb as h,Tb as x,Ua as m,Ub as M,Va as f,Wb as S,Zb as K,_b as X,ga as T,kb as w,mb as b,qa as _,ra as g,rb as F,sb as et,tb as it,tc as ot,ub as nt,uc as at,vb as a,wb as r,wc as D,xb as O}from"./chunk-TDWWCWZI.js";import{h as v}from"./chunk-DLDOR3YA.js";var bt=(()=>{let l=class l{constructor(t){this.dialogRef=t,this.rechazoReason=""}onConfirm(){this.rechazoReason!=""&&this.dialogRef.close(this.rechazoReason)}onCancel(){this.dialogRef.close()}};l.\u0275fac=function(e){return new(e||l)(f(P))},l.\u0275cmp=T({type:l,selectors:[["app-rechazar-turno-dialog"]],standalone:!0,features:[S],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Motivo del rechazo","rows","5",3,"ngModelChange","ngModel"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(a(0,"h1",0),s(1,"Rechazar Turno"),r(),a(2,"div",1)(3,"mat-form-field",2)(4,"textarea",3),M("ngModelChange",function(d){return x(i.rechazoReason,d)||(i.rechazoReason=d),d}),r()()(),a(5,"div",4)(6,"button",5),u("click",function(){return i.onCancel()}),s(7,"Cancelar"),r(),a(8,"button",5),u("click",function(){return i.onConfirm()}),s(9,"Confirmar"),r()()),e&2&&(m(4),h("ngModel",i.rechazoReason))},dependencies:[L,A,j,B,U,H,N,G,R,z,D,V,E,k,I,W],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let o=l;return o})();function Pt(o,l){if(o&1){let n=C();a(0,"button",16),u("click",function(){_(n);let e=c().index,i=c();return g(i.removeDatoDinamico(e))}),a(1,"mat-icon"),s(2,"remove_circle"),r()()}}function zt(o,l){if(o&1){let n=C();a(0,"div")(1,"mat-form-field",2)(2,"input",13),M("ngModelChange",function(e){let i=_(n).$implicit;return x(i.key,e)||(i.key=e),g(e)}),r()(),a(3,"mat-form-field",2)(4,"input",14),M("ngModelChange",function(e){let i=_(n).$implicit;return x(i.value,e)||(i.value=e),g(e)}),r()(),w(5,Pt,3,0,"button",15),r()}if(o&2){let n=l.$implicit,t=c();m(2),h("ngModel",n.key),m(2),h("ngModel",n.value),m(),b("ngIf",t.datosDinamicos.length>1)}}function Rt(o,l){if(o&1){let n=C();a(0,"button",17),u("click",function(){_(n);let e=c();return g(e.addDatoDinamico())}),s(1,"Agregar Dato Din\xE1mico"),r()}}var Dt=(()=>{let l=class l{constructor(t,e,i){this.dialogRef=t,this.data=e,this.toast=i,this.resenia="",this.altura=null,this.peso=null,this.temperatura=null,this.presion="",this.datosDinamicos=[{key:"",value:""}]}onConfirm(){if(this.resenia!==""&&this.altura!==null&&this.altura>0&&this.peso!==null&&this.peso>0&&this.temperatura!==null&&this.presion!==""){let t={fecha:this.data.turno.fecha,altura:this.altura,peso:this.peso,temperatura:this.temperatura,presion:this.presion,datosDinamicos:this.datosDinamicos.filter(e=>e.key!==""&&e.value!=="")};this.dialogRef.close({historiaClinica:t,resenia:this.resenia})}else this.toast.error("Los campos de rese\xF1a, altura, peso, tempratura y presi\xF3n son obligatorios")}onCancel(){this.dialogRef.close()}addDatoDinamico(){this.datosDinamicos.length<3&&this.datosDinamicos.push({key:"",value:""})}removeDatoDinamico(t){this.datosDinamicos.length>1&&this.datosDinamicos.splice(t,1)}};l.\u0275fac=function(e){return new(e||l)(f(P),f(Q),f(J))},l.\u0275cmp=T({type:l,selectors:[["app-finalizar-turno-dialog"]],standalone:!0,features:[S],decls:21,vars:7,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Deje un diagn\xF3stico como rese\xF1a","rows","5",3,"ngModelChange","ngModel"],["matInput","","placeholder","Altura (cm)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Peso (kg)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Temperatura (\xB0C)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Presi\xF3n",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text","btn","btn-danger",3,"click"],["mat-button","",1,"dialog-text","btn","btn-success",3,"click"],["matInput","","placeholder","Clave dato din\xE1mico",3,"ngModelChange","ngModel"],["matInput","","placeholder","Valor dato din\xE1mico",3,"ngModelChange","ngModel"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["mat-button","",3,"click"]],template:function(e,i){e&1&&(a(0,"h1",0),s(1,"Finalizar Turno"),r(),O(2,"br"),a(3,"div",1)(4,"mat-form-field",2)(5,"textarea",3),M("ngModelChange",function(d){return x(i.resenia,d)||(i.resenia=d),d}),r()(),a(6,"mat-form-field",2)(7,"input",4),M("ngModelChange",function(d){return x(i.altura,d)||(i.altura=d),d}),r()(),a(8,"mat-form-field",2)(9,"input",5),M("ngModelChange",function(d){return x(i.peso,d)||(i.peso=d),d}),r()(),a(10,"mat-form-field",2)(11,"input",6),M("ngModelChange",function(d){return x(i.temperatura,d)||(i.temperatura=d),d}),r()(),a(12,"mat-form-field",2)(13,"input",7),M("ngModelChange",function(d){return x(i.presion,d)||(i.presion=d),d}),r()(),w(14,zt,6,3,"div",8)(15,Rt,2,0,"button",9),r(),a(16,"div",10)(17,"button",11),u("click",function(){return i.onCancel()}),s(18,"Cancelar"),r(),a(19,"button",12),u("click",function(){return i.onConfirm()}),s(20,"Guardar"),r()()),e&2&&(m(5),h("ngModel",i.resenia),m(2),h("ngModel",i.altura),m(2),h("ngModel",i.peso),m(2),h("ngModel",i.temperatura),m(2),h("ngModel",i.presion),m(),b("ngForOf",i.datosDinamicos),m(),b("ngIf",i.datosDinamicos.length<3))},dependencies:[L,A,j,B,ht,Y,U,H,N,G,R,z,ut,D,ot,at,V,E,mt,k,I,W],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;padding-top:40px;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let o=l;return o})();var Et=(()=>{let l=class l{constructor(t,e){this.dialogRef=t,this.data=e}onClose(){this.dialogRef.close()}};l.\u0275fac=function(e){return new(e||l)(f(P),f(Q))},l.\u0275cmp=T({type:l,selectors:[["app-show-motivo-rechazo-dialog"]],standalone:!0,features:[S],decls:8,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(a(0,"h1",0),s(1,"Motivo de Rechazo"),r(),a(2,"div",1)(3,"p"),s(4),r()(),a(5,"div",2)(6,"button",3),u("click",function(){return i.onClose()}),s(7,"Ok"),r()()),e&2&&(m(4),y(i.data.motivo))},dependencies:[R,z],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;height:100px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let o=l;return o})();var kt=(()=>{let l=class l{constructor(t){this.dialogRef=t,this.calificacion=""}onConfirm(){this.calificacion!=""&&this.dialogRef.close(this.calificacion)}onCancel(){this.dialogRef.close()}};l.\u0275fac=function(e){return new(e||l)(f(P))},l.\u0275cmp=T({type:l,selectors:[["app-calificacion-encuesta-dialog"]],standalone:!0,features:[S],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Califique a su especialista","rows","5",3,"ngModelChange","ngModel"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(a(0,"h1",0),s(1,"Encuesta"),r(),a(2,"div",1)(3,"mat-form-field",2)(4,"textarea",3),M("ngModelChange",function(d){return x(i.calificacion,d)||(i.calificacion=d),d}),r()()(),a(5,"div",4)(6,"button",5),u("click",function(){return i.onCancel()}),s(7,"Cancelar"),r(),a(8,"button",5),u("click",function(){return i.onConfirm()}),s(9,"Confirmar"),r()()),e&2&&(m(4),h("ngModel",i.calificacion))},dependencies:[L,A,j,B,U,H,N,G,R,z,D,V,E,k,I,W],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let o=l;return o})();function Ot(o,l){if(o&1&&O(0,"app-spinner",3),o&2){let n=c();b("loading",n.loading)}}function Wt(o,l){o&1&&(a(0,"th",10),s(1,"Especialista"),r())}function At(o,l){o&1&&(a(0,"th",10),s(1,"Paciente"),r())}function Bt(o,l){o&1&&(a(0,"td",13),s(1,"No se encontraron resultados"),r())}function jt(o,l){if(o&1){let n=C();a(0,"td",16),u("click",function(){_(n);let e=c().$implicit,i=c(3);return g(i.setFilter("especialista",e.especialistaId))}),s(1),r()}if(o&2){let n=c().$implicit,t=c(3);m(),y(t.userMap[n.especialistaId])}}function Lt(o,l){if(o&1){let n=C();a(0,"td",16),u("click",function(){_(n);let e=c().$implicit,i=c(3);return g(i.setFilter("paciente",e.pacienteId))}),s(1),r()}if(o&2){let n=c().$implicit,t=c(3);m(),y(t.userMap[n.pacienteId])}}function Nt(o,l){if(o&1){let n=C();a(0,"button",7),u("click",function(){_(n);let e=c(2).$implicit,i=c(3);return g(i.changeState(e,"confirmado"))}),s(1," Aceptar "),r(),a(2,"button",20),u("click",function(){_(n);let e=c(2).$implicit,i=c(3);return g(i.changeState(e,"rechazado"))}),s(3," Rechazar "),r()}}function Gt(o,l){if(o&1){let n=C();a(0,"button",19),u("click",function(){_(n);let e=c().$implicit,i=c(3);return g(i.changeState(e,"cancelado"))}),s(1," Cancelar "),r(),w(2,Nt,4,0)}if(o&2){let n=c(4);m(2),F(2,n.currentRol=="especialista"?2:-1)}}function Ht(o,l){if(o&1){let n=C();a(0,"button",21),u("click",function(){_(n);let e=c().$implicit,i=c(3);return g(i.showMotivo(e))}),s(1," Ver motivo "),r()}}function Ut(o,l){if(o&1){let n=C();a(0,"button",21),u("click",function(){_(n);let e=c().$implicit,i=c(3);return g(i.showMotivo(e))}),s(1," Ver motivo "),r()}}function qt(o,l){if(o&1){let n=C();a(0,"button",22),u("click",function(){_(n);let e=c().$implicit,i=c(3);return g(i.changeState(e,"finalizado"))}),s(1," Finalizar "),r()}}function Kt(o,l){o&1&&(a(0,"mat-icon"),s(1,"check"),r())}function Xt(o,l){if(o&1){let n=C();a(0,"button",22),u("click",function(){_(n);let e=c(2).$implicit,i=c(3);return g(i.completarEncuesta(e))}),s(1," Completar Encuesta "),r()}}function Jt(o,l){if(o&1){let n=C();a(0,"button",22),u("click",function(){_(n);let e=c(2).$implicit,i=c(3);return g(i.showEncuesta(e))}),s(1," Ver Calificaci\xF3n "),r()}}function Qt(o,l){if(o&1){let n=C();a(0,"button",21),u("click",function(){_(n);let e=c().$implicit,i=c(3);return g(i.showMotivo(e))}),s(1," Ver rese\xF1a "),r(),w(2,Xt,2,0,"button",23)(3,Jt,2,0,"button",23)}if(o&2){let n=c().$implicit,t=c(3);m(2),F(2,t.currentRol=="paciente"&&n.comentario==""?2:-1),m(),F(3,n.comentario!=""?3:-1)}}function Yt(o,l){if(o&1){let n=C();a(0,"tr",9)(1,"td"),s(2),K(3,"capitalizeFirstLetterPipe"),r(),a(4,"td"),s(5),K(6,"setFechaWithSlashes"),r(),a(7,"td"),s(8),K(9,"horariosAmPmFormat"),r(),w(10,jt,2,1,"td",15)(11,Lt,2,1,"td",15),a(12,"td",16),u("click",function(){let e=_(n).$implicit,i=c(3);return g(i.setFilter("especialidad",e.especialidad))}),s(13),r(),a(14,"td",17),s(15),r(),a(16,"td")(17,"div",18),w(18,Gt,3,1)(19,Ht,2,0)(20,Ut,2,0)(21,qt,2,0)(22,Kt,2,0)(23,Qt,4,2),r()()()}if(o&2){let n=l.$implicit,t=c(3);m(2),y(X(3,8,n.fecha.dayName)),m(3),y(X(6,10,n.fecha.fecha)),m(3),y(X(9,12,n.fecha.timeSlot.time)),m(2),F(10,t.currentRol!="especialista"?10:-1),m(),F(11,t.currentRol!="paciente"?11:-1),m(2),y(n.especialidad),m(2),y(n.estado),m(3),F(18,n.estado=="pendiente"?18:n.estado=="cancelado"?19:n.estado=="rechazado"?20:n.estado=="confirmado"&&t.currentRol=="especialista"?21:n.estado=="confirmado"&&t.currentRol=="paciente"?22:n.estado=="finalizado"&&n.resenia!=""?23:-1)}}function Zt(o,l){if(o&1&&it(0,Yt,24,14,"tr",9,et),o&2){let n=c(2);nt(n.pagedTurnos)}}function $t(o,l){if(o&1){let n=C();a(0,"app-listado-filtros",4),u("filterApplied",function(e){_(n);let i=c();return g(i.onFilterApplied(e))})("filtersCleared",function(){_(n);let e=c();return g(e.onFiltersCleared())}),r(),a(1,"div",5)(2,"input",6),M("ngModelChange",function(e){_(n);let i=c();return x(i.generalSearch,e)||(i.generalSearch=e),g(e)}),r(),a(3,"button",7),u("click",function(){_(n);let e=c();return g(e.onGeneralSearch())}),a(4,"mat-icon"),s(5,"search"),r()()(),a(6,"table",8)(7,"thead")(8,"tr",9)(9,"th",10),s(10,"D\xEDa"),r(),a(11,"th",10),s(12,"Fecha"),r(),a(13,"th",10),s(14,"Horario"),r(),w(15,Wt,2,0,"th",10)(16,At,2,0,"th",10),a(17,"th",10),s(18,"Especialidad"),r(),a(19,"th",11),s(20,"Estado"),r(),a(21,"th",12),s(22,"Modificar Estado"),r()()(),a(23,"tbody"),w(24,Bt,2,0,"td",13)(25,Zt,2,0),r()(),a(26,"app-paginacion",14),u("pageChanged",function(e){_(n);let i=c();return g(i.setPage(e))}),r()}if(o&2){let n=c();b("currentRol",n.currentRol)("turnos",n.turnos)("filteredTurnos",n.filteredTurnos)("userMap",n.userMap)("especialidadFilter",n.especialidadFilter)("especialistaFilter",n.especialistaFilter)("pacienteFilter",n.pacienteFilter),m(2),h("ngModel",n.generalSearch),m(13),F(15,n.currentRol!="especialista"?15:-1),m(),F(16,n.currentRol!="paciente"?16:-1),m(8),F(24,(n.pagedTurnos==null?null:n.pagedTurnos.length)===0||(n.turnos==null?null:n.turnos.length)==0||!n.turnos?24:25),m(2),b("currentPage",n.currentPage)("totalPages",n.totalPages)}}var It=(()=>{let l=class l{constructor(t,e,i,p,d){this.userService=t,this.loginService=e,this.turnoService=i,this.toast=p,this.dialog=d,this.loading=!0,this.currentRol="",this.mySelf=null,this.pacientes=[],this.medicos=[],this.turnos=[],this.filteredTurnos=[],this.userMap={},this.currentPage=1,this.pageSize=10,this.especialidadFilter="",this.especialistaFilter="",this.pacienteFilter="",this.generalSearch=""}ngOnInit(){this.getData()}getTurno(t){console.log(t)}getData(){return v(this,null,function*(){try{let t=this.loginService.getLoggedUser();if(this.mySelf=yield this.userService.getUserByEmail(t),this.currentRol=this.mySelf?.rol,this.currentRol=="paciente"?this.turnos=yield this.turnoService.getTurnosFromPaciente(t):this.currentRol=="especialista"&&(this.turnos=yield this.turnoService.getTurnosFromEspecialista(t)),this.filteredTurnos=this.turnos,this.turnos&&this.turnos.length>0)for(let e of this.turnos)this.userMap[e.especialistaId]||(this.userMap[e.especialistaId]=yield this.userService.getNameAndSurnameByEmail(e.especialistaId)),this.userMap[e.pacienteId]||(this.userMap[e.pacienteId]=yield this.userService.getNameAndSurnameByEmail(e.pacienteId))}catch(t){console.log(t)}finally{this.loading=!1}})}completarEncuesta(t){this.dialog.open(kt,{width:"400px",data:{calificacion:""}})?.afterClosed().subscribe(i=>v(this,null,function*(){i&&(t.comentario=i,yield this.turnoService.update(t))}))}showEncuesta(t){let e=t.comentario;t.estado=="finalizado"&&this.dialog.open(Ft,{width:"400px",data:{calificacion:e}})}setFilter(t,e){t==="especialidad"?this.especialidadFilter=e:t==="especialista"?this.especialistaFilter=this.userMap[e]:t=="paciente"&&(this.pacienteFilter=this.userMap[e])}onFilterApplied(t){this.especialidadFilter=t.especialidadFilter,this.especialistaFilter=t.especialistaFilter,this.pacienteFilter=t.pacienteFilter,this.applyFilters()}onFiltersCleared(){this.especialidadFilter="",this.especialistaFilter="",this.filteredTurnos=this.turnos}onGeneralSearch(){this.applyFilters()}applyFilters(){this.filteredTurnos=this.turnos?.filter(t=>{let e=this.especialidadFilter?t.especialidad.includes(this.especialidadFilter):!0,i=this.especialistaFilter?this.userMap[t.especialistaId].includes(this.especialistaFilter):!0,p=this.pacienteFilter?this.userMap[t.pacienteId].includes(this.pacienteFilter):!0,d=this.generalSearch?this.matchGeneralSearch(t):!0;return e&&i&&p&&d})}matchGeneralSearch(t){let e=this.generalSearch.toLowerCase(),i=[t.especialidad,this.userMap[t.especialistaId],this.userMap[t.pacienteId],t.fecha.dayName,t.fecha.fecha,t.fecha.timeSlot.time,t.estado,t.resenia,t.comentario];return t.historiaClinica&&i.push(t.historiaClinica.altura?.toString(),t.historiaClinica.peso?.toString(),t.historiaClinica.temperatura?.toString(),t.historiaClinica.presion,...t.historiaClinica.datosDinamicos?.flatMap(d=>[d.key,d.value])||[]),i.filter(d=>d!=null&&d!="").some(d=>d.toLowerCase().includes(e))}changeState(t,e){return v(this,null,function*(){let i=null;e=="cancelado"&&(i=this.dialog.open(Mt,{width:"400px",data:{motivo:""}})),e=="rechazado"&&(i=this.dialog.open(bt,{width:"400px",data:{motivo:""}})),(e=="cancelado"||e=="rechazado")&&i?.afterClosed().subscribe(p=>v(this,null,function*(){p&&(t.estado=e,t.comentario=p,t.fecha.timeSlot.estaDisponible=!0,this.liberarHorarioAlMedico(t),yield this.turnoService.update(t))})),e=="confirmado"&&(this.toast.success("Turno confirmado!"),t.estado=e,yield this.turnoService.update(t)),e=="finalizado"&&(i=this.dialog.open(Dt,{width:"400px",data:{turno:t}}),i?.afterClosed().subscribe(p=>v(this,null,function*(){p&&(t.estado=e,t.resenia=p.resenia,t.historiaClinica=p.historiaClinica,yield this.cargarHistoriaClinica(t,p.historiaClinica),yield this.turnoService.update(t))})))})}liberarHorarioAlMedico(t){return v(this,null,function*(){let e=yield this.userService.getUserByEmail(t.especialistaId),i=t.fecha.timeSlot.time;e&&(e?.horarios?.forEach(p=>{p.fecha===t.fecha.fecha&&t.fecha.timeSlots?.push({time:i,estaDisponible:!0})}),this.userService.update(e))})}cargarHistoriaClinica(t,e){return v(this,null,function*(){if(t&&t.estado==="finalizado"){let i=yield this.userService.getUserByEmail(t.pacienteId);i.historiaClinica=i.historiaClinica?.filter(p=>p&&Object.keys(p).length>0)||[],i.historiaClinica?i.historiaClinica.push(e):i.historiaClinica=[e],yield this.userService.update(i)}})}showMotivo(t){let e=t.comentario;if(t.estado=="cancelado"&&this.dialog.open(Tt,{width:"400px",data:{motivo:e}}),t.estado=="rechazado"&&this.dialog.open(Et,{width:"400px",data:{motivo:e}}),t.estado=="finalizado"){let i=t.resenia;this.dialog.open(wt,{width:"400px",data:{resenia:i}})}}get pagedTurnos(){let t=(this.currentPage-1)*this.pageSize;return this.filteredTurnos?.slice(t,t+this.pageSize)}get totalPages(){return this.filteredTurnos?Math.ceil(this.filteredTurnos.length/this.pageSize):0}setPage(t){this.currentPage=t}};l.\u0275fac=function(e){return new(e||l)(f(lt),f(rt),f(xt),f(J),f(pt))},l.\u0275cmp=T({type:l,selectors:[["app-mis-turnos"]],standalone:!0,features:[S],decls:5,vars:1,consts:[[1,"container-fluid"],[1,"container","mt-4"],[1,"row","container"],[3,"loading"],[3,"filterApplied","filtersCleared","currentRol","turnos","filteredTurnos","userMap","especialidadFilter","especialistaFilter","pacienteFilter"],[1,"filtro-general","mb-3","d-flex","align-items-center",2,"margin-top","1em"],["type","text","placeholder","Buscar por cualquier campo",1,"form-control","me-2",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"table","table-striped","table-light","container"],[1,"text-center"],["scope","col"],["scope","col",2,"width","120px"],["scope","col",1,"td-modify-state"],["colspan","8",1,"td-no-results"],[3,"pageChanged","currentPage","totalPages"],[1,"td-clickeable"],[1,"td-clickeable",3,"click"],[2,"width","120px"],[1,"td-modify-state"],[1,"btn","btn-dark",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),w(3,Ot,1,1,"app-spinner",3)(4,$t,27,13),r()()()),e&2&&(m(3),F(3,i.loading?3:4))},dependencies:[Y,V,E,k,I,D,dt,St,_t,Ct,ft,gt],styles:['.container-fluid[_ngcontent-%COMP%]{height:90vh;background-color:#6ad8d4;background-image:url("./media/main_fondo-S2RK2XML.png");background-size:250px 250px;background-repeat:repeat;background-position:center;padding:20px}.mt-4[_ngcontent-%COMP%]{background-color:#add8e6;height:800px}table[_ngcontent-%COMP%]{margin-top:1em}.td-modify-state[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly;align-items:center}.td-clickeable[_ngcontent-%COMP%]:hover{opacity:.6;cursor:pointer}.td-no-results[_ngcontent-%COMP%]{background-color:#fff;text-align:center;font-size:medium;padding-top:1em;padding-bottom:1em}.filtro-general[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.btn-success[_ngcontent-%COMP%]{width:90px;height:38px}']});let o=l;return o})();var $e=(()=>{let l=class l{};l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=T({type:l,selectors:[["app-mis-turnos-container"]],standalone:!0,features:[S],decls:4,vars:0,consts:[[1,"container-fluid","m-0","p-0"]],template:function(e,i){e&1&&(a(0,"div",0),O(1,"app-navbar")(2,"app-mis-turnos")(3,"app-footer"),r())},dependencies:[It,st,ct]});let o=l;return o})();export{$e as MisTurnosContainerComponent};
