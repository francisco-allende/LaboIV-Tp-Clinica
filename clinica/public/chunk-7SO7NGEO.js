import{g as N}from"./chunk-Q2GRMTA4.js";import{a as P,d as O,g as $,q,s as j,t as L}from"./chunk-FSRSBQOR.js";import{Ab as R,Db as f,Ib as k,Jb as F,Kb as D,Mb as m,Sb as I,Tb as S,Ua as C,Ub as z,Wb as T,ga as V,kb as _,mb as y,qa as u,ra as h,rb as E,vb as d,wb as l,xb as M,za as b}from"./chunk-TDWWCWZI.js";import{e as x,f as U}from"./chunk-DLDOR3YA.js";var Q=x((ge,A)=>{"use strict";var Z="bold|bolder|lighter|[1-9]00",J="italic|oblique",K="small-caps",X="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",Y="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",W=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,G=new RegExp(`(${Z}) +`,"i"),ee=new RegExp(`(${J}) +`,"i"),te=new RegExp(`(${K}) +`,"i"),ae=new RegExp(`(${X}) +`,"i"),ne=new RegExp(`([\\d\\.]+)(${Y}) *((?:${W})( *, *(?:${W}))*)`),v={},ie=16;A.exports=e=>{if(v[e])return v[e];let t=ne.exec(e);if(!t)return;let a={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(t[1]),unit:t[2],family:t[3].replace(/["']/g,"").replace(/ *, */g,",")},n,i,r,o,c=e.substring(0,t.index);switch((n=G.exec(c))&&(a.weight=n[1]),(i=ee.exec(c))&&(a.style=i[1]),(r=te.exec(c))&&(a.variant=r[1]),(o=ae.exec(c))&&(a.stretch=o[1]),a.unit){case"pt":a.size/=.75;break;case"pc":a.size*=16;break;case"in":a.size*=96;break;case"cm":a.size*=96/2.54;break;case"mm":a.size*=96/25.4;break;case"%":break;case"em":case"rem":a.size*=ie/.75;break;case"q":a.size*=96/25.4/4;break}return v[e]=a}});var B=x(g=>{"use strict";var re=Q();g.parseFont=re;g.createCanvas=function(e,t){return Object.assign(document.createElement("canvas"),{width:e,height:t})};g.createImageData=function(e,t,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,t);default:return new ImageData(e,t,a)}};g.loadImage=function(e,t){return new Promise(function(a,n){let i=Object.assign(document.createElement("img"),t);function r(){i.onload=null,i.onerror=null}i.onload=function(){r(),a(i)},i.onerror=function(){r(),n(new Error('Failed to load the image "'+e+'"'))},i.src=e})}});function le(){return e=>{let t=e.value;return/^[a-zA-ZáéíóúÁÉÍÓÚüÜ\s]+$/.test(t)?null:{invalidWord:!0}}}function de(){return e=>{let t=e.value;return!isNaN(t)&&t>0&&t<=120?null:{invalidNumber:!0}}}function pe(){return e=>{let t=e.value;return/^[0-8]{8}$/.test(t)?null:{invalidDni:!0}}}function ue(){return e=>/\.(jpg|jpeg|png)$/i.test(e.value)?null:{invalidWord:!0}}function he(){return e=>{let t=e.get("password"),a=e.get("repeatPassword"),n={noCoincide:"La contrase\xF1a no coincide"};return t&&a&&t.value!==a.value?(a.setErrors(n),n):(a?.setErrors(null),null)}}var H=U(B());var oe=["captchaCanvas"];function ce(e,t){e&1&&(d(0,"div",6),m(1," C\xF3digo incorrecto "),l())}function se(e,t){e&1&&(d(0,"div",7),m(1," C\xF3digo correcto "),l())}var ye=(()=>{let t=class t{constructor(){this.invalid=!1,this.wasClicked=!1,this.captchaText="",this.enteredCaptcha="",this.captcha=[],this.captchaValidated=new b}ngOnInit(){}ngAfterViewInit(){this.createCaptcha()}onChange(n){n.length===6&&setTimeout(()=>{this.captchaForDirective=this.enteredCaptcha},200)}validateCaptcha(){let n=this.enteredCaptcha===this.captcha;this.wasClicked=!0,n?(this.invalid=!1,this.captchaValidated.emit(n)):this.invalid=!0}createCaptcha(){this.generateCaptcha=!0;let n=(0,H.createCanvas)(150,50),i=n.getContext("2d");i.font="30px Arial",i.fillStyle="black";let r=[];for(let p=0;p<6;p++)p%2===0?r[p]=String.fromCharCode(Math.floor(Math.random()*26+65)):r[p]=Math.floor(Math.random()*10+0).toString();let o=r.join("");this.captcha=o,i.fillText(o,10,35);let c=new Image;c.src=n.toDataURL();let s=this.captchaCanvasRef.nativeElement,w=s.getContext("2d");w.clearRect(0,0,s.width,s.height),c.onload=()=>{w.drawImage(c,0,0)}}newCaptcha(n){this.captcha=n}captchaResultDirective(n){this.captchaValidated.emit(n)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=V({type:t,selectors:[["app-captcha"]],viewQuery:function(i,r){if(i&1&&k(oe,5),i&2){let o;F(o=D())&&(r.captchaCanvasRef=o.first)}},outputs:{captchaValidated:"captchaValidated"},standalone:!0,features:[T],decls:14,vars:3,consts:[["captchaCanvas",""],[1,"my-3","text-center"],[1,"col-12","control"],["width","150","height","50",1,"canva"],["type","text","name","reCaptcha","id","reCaptcha","placeholder","Ingres\xE1 el c\xF3digo",1,"form-control",3,"ngModelChange","maxlength","ngModel"],["type","button",1,"btn","rounded","btn-primary",3,"click"],[1,"text-danger"],[1,"text-success"]],template:function(i,r){if(i&1){let o=R();d(0,"div",1)(1,"div",2),M(2,"canvas",3,0),l(),d(4,"div",2)(5,"input",4),f("ngModelChange",function(s){return u(o),h(r.onChange(s))}),z("ngModelChange",function(s){return u(o),S(r.enteredCaptcha,s)||(r.enteredCaptcha=s),h(s)}),l()(),d(6,"div",2)(7,"button",5),f("click",function(){return u(o),h(r.validateCaptcha())}),m(8,"Validar Captcha"),l()(),d(9,"div",2)(10,"button",5),f("click",function(){return u(o),h(r.createCaptcha())}),m(11,"Cambiar"),l()(),_(12,ce,2,0,"div",6)(13,se,2,0),l()}i&2&&(C(5),y("maxlength",6),I("ngModel",r.enteredCaptcha),C(7),E(12,r.invalid?12:!r.invalid&&r.wasClicked?13:-1))},dependencies:[N,L,P,O,q,j,$],styles:[".my-3[_ngcontent-%COMP%]{padding:1em;border:2px solid #ccc;border-radius:5px}.canva[_ngcontent-%COMP%]{background-color:#8d8c8c;color:#fff;opacity:.3}.control[_ngcontent-%COMP%]{margin-bottom:1em}.btn[_ngcontent-%COMP%]{border-radius:0!important}"]});let e=t;return e})();export{le as a,de as b,pe as c,ue as d,he as e,ye as f};
