import{a as ae,b as re,c as se}from"./chunk-VBTM67SQ.js";import{a as X,b as Q,c as Z,d as tt}from"./chunk-FZKDYG2G.js";import{a as y,b as Zt,c as E}from"./chunk-GSOWVK67.js";import{a as P,d as A,g as V,i as Xt,s as z,t as G}from"./chunk-ARAZ5LMM.js";import{a as te}from"./chunk-NP2AXQHK.js";import{i as gt,n as T,o as O,p as Qt,q,r as Y,s as K,t as J}from"./chunk-SSCLPC2F.js";import{a as oe}from"./chunk-DAF4DERI.js";import{a as ee,b as ie,c as ne}from"./chunk-TAME4DBA.js";import{a as Yt,b as Kt}from"./chunk-SCZ67AR2.js";import{a as qt,b as Jt}from"./chunk-PAXTVJSM.js";import"./chunk-XE5KUILY.js";import{a as Gt}from"./chunk-RCHQO65C.js";import{P as dt}from"./chunk-MT3VMLBQ.js";import"./chunk-3PKXA2GJ.js";import{a as Ht,e as $t}from"./chunk-XCRSOGC7.js";import{$a as _,A as U,Ab as c,Bb as $,Ca as Dt,Ea as st,Eb as M,F as Mt,Fa as Rt,Hb as u,Ib as m,Jb as Lt,K as xt,Kb as jt,O as St,R as It,Rb as d,Sb as x,W as Ft,Wa as H,Wb as S,Xb as I,Yb as F,_a as p,_b as v,aa as rt,bc as lt,cc as ct,da as wt,ea as Tt,ga as _t,h as L,i as Ct,ia as it,ja as yt,lb as kt,ma as Et,na as C,nc as Wt,oa as bt,pb as b,qb as Pt,rb as R,rc as ft,tb as At,ub as Vt,vb as w,vc as Bt,w as B,wb as zt,wc as Ut,x as vt,xa as g,xb as Ot,ya as h,yb as Nt,yc as k,zb as l}from"./chunk-EWRZD5YS.js";var de=(()=>{let o=class o{constructor(t){this.dialogRef=t,this.rechazoReason=""}onConfirm(){this.rechazoReason!=""&&this.dialogRef.close(this.rechazoReason)}onCancel(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T))},o.\u0275cmp=C({type:o,selectors:[["app-rechazar-turno-dialog"]],standalone:!0,features:[v],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Motivo del rechazo","rows","5",3,"ngModelChange","ngModel"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(l(0,"h1",0),d(1,"Rechazar Turno"),c(),l(2,"div",1)(3,"mat-form-field",2)(4,"textarea",3),F("ngModelChange",function(s){return I(i.rechazoReason,s)||(i.rechazoReason=s),s}),c()()(),l(5,"div",4)(6,"button",5),u("click",function(){return i.onCancel()}),d(7,"Cancelar"),c(),l(8,"button",5),u("click",function(){return i.onConfirm()}),d(9,"Confirmar"),c()()),e&2&&(p(4),S("ngModel",i.rechazoReason))},dependencies:[J,q,K,Y,tt,Z,X,Q,E,y,k,z,P,A,V,G],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var Ie=["*"],mt;function Fe(){if(mt===void 0&&(mt=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(mt=n.trustedTypes.createPolicy("angular#components",{createHTML:o=>o}))}return mt}function ot(n){return Fe()?.createHTML(n)||n}function me(n){return Error(`Unable to find icon with the name "${n}"`)}function we(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function pe(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function ue(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var D=class{constructor(o,r,t){this.url=o,this.svgText=r,this.options=t}},Te=(()=>{let o=class o{constructor(t,e,i,a){this._httpClient=t,this._sanitizer=e,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,e,i){return this.addSvgIconInNamespace("",t,e,i)}addSvgIconLiteral(t,e,i){return this.addSvgIconLiteralInNamespace("",t,e,i)}addSvgIconInNamespace(t,e,i,a){return this._addSvgIconConfig(t,e,new D(i,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,i,a){let s=this._sanitizer.sanitize(H.HTML,i);if(!s)throw ue(i);let f=ot(s);return this._addSvgIconConfig(t,e,new D("",f,a))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,i){return this._addSvgIconSetConfig(t,new D(e,null,i))}addSvgIconSetLiteralInNamespace(t,e,i){let a=this._sanitizer.sanitize(H.HTML,e);if(!a)throw ue(e);let s=ot(a);return this._addSvgIconSetConfig(t,new D("",s,i))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let e=this._sanitizer.sanitize(H.RESOURCE_URL,t);if(!e)throw pe(t);let i=this._cachedIconsByUrl.get(e);return i?B(pt(i)):this._loadSvgIconFromConfig(new D(t,null)).pipe(rt(a=>this._cachedIconsByUrl.set(e,a)),U(a=>pt(a)))}getNamedSvgIcon(t,e=""){let i=_e(e,t),a=this._svgIconConfigs.get(i);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(e,t),a)return this._svgIconConfigs.set(i,a),this._getSvgFromConfig(a);let s=this._iconSetConfigs.get(e);return s?this._getSvgFromIconSetConfigs(t,s):vt(me(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?B(pt(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(U(e=>pt(e)))}_getSvgFromIconSetConfigs(t,e){let i=this._extractIconWithNameFromAnySet(t,e);if(i)return B(i);let a=e.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(xt(f=>{let W=`Loading icon set URL: ${this._sanitizer.sanitize(H.RESOURCE_URL,s.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(W)),B(null)})));return Mt(a).pipe(U(()=>{let s=this._extractIconWithNameFromAnySet(t,e);if(!s)throw me(t);return s}))}_extractIconWithNameFromAnySet(t,e){for(let i=e.length-1;i>=0;i--){let a=e[i];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(a),f=this._extractSvgIconFromSet(s,t,a.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(rt(e=>t.svgText=e),U(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?B(null):this._fetchIcon(t).pipe(rt(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,i){let a=t.querySelector(`[id="${e}"]`);if(!a)return null;let s=a.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let f=this._svgElementFromString(ot("<svg></svg>"));return f.appendChild(s),this._setSvgAttributes(f,i)}_svgElementFromString(t){let e=this._document.createElement("DIV");e.innerHTML=t;let i=e.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){let e=this._svgElementFromString(ot("<svg></svg>")),i=t.attributes;for(let a=0;a<i.length;a++){let{name:s,value:f}=i[a];s!=="id"&&e.setAttribute(s,f)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[a].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){let{url:e,options:i}=t,a=i?.withCredentials??!1;if(!this._httpClient)throw we();if(e==null)throw Error(`Cannot fetch icon from URL "${e}".`);let s=this._sanitizer.sanitize(H.RESOURCE_URL,e);if(!s)throw pe(e);let f=this._inProgressUrlFetches.get(s);if(f)return f;let j=this._httpClient.get(s,{responseType:"text",withCredentials:a}).pipe(U(W=>ot(W)),It(()=>this._inProgressUrlFetches.delete(s)),Ft());return this._inProgressUrlFetches.set(s,j),j}_addSvgIconConfig(t,e,i){return this._svgIconConfigs.set(_e(t,e),i),this}_addSvgIconSetConfig(t,e){let i=this._iconSetConfigs.get(t);return i?i.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){let e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let i=0;i<this._resolvers.length;i++){let a=this._resolvers[i](e,t);if(a)return ye(a)?new D(a.url,null,a.options):new D(a,null)}}};o.\u0275fac=function(e){return new(e||o)(it(Ht,8),it($t),it(ft,8),it(st))},o.\u0275prov=wt({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();function pt(n){return n.cloneNode(!0)}function _e(n,o){return n+":"+o}function ye(n){return!!(n.url&&n.options)}var Ee=new _t("MAT_ICON_DEFAULT_OPTIONS"),be=new _t("mat-icon-location",{providedIn:"root",factory:De});function De(){let n=yt(ft),o=n?n.location:null;return{getPathname:()=>o?o.pathname+o.search:""}}var fe=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Re=fe.map(n=>`[${n}]`).join(", "),ke=/^url\(['"]?#(.*?)['"]?\)$/,ut=(()=>{let o=class o{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}constructor(t,e,i,a,s,f){this._elementRef=t,this._iconRegistry=e,this._location=a,this._errorHandler=s,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Ct.EMPTY,f&&(f.color&&(this.color=this._defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){let i=t.childNodes[e];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,e=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),e.forEach(i=>t.classList.add(i)),this._previousFontSetClass=e,this.fontIcon!==this._previousFontIconClass&&!e.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let e=this._elementsWithExternalReferences;e&&e.forEach((i,a)=>{i.forEach(s=>{a.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let e=t.querySelectorAll(Re),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<e.length;a++)fe.forEach(s=>{let f=e[a],j=f.getAttribute(s),W=j?j.match(ke):null;if(W){let at=i.get(f);at||(at=[],i.set(f,at)),at.push({name:s,value:W[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[e,i]=this._splitIconName(t);e&&(this._svgNamespace=e),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,e).pipe(St(1)).subscribe(a=>this._setSvgElement(a),a=>{let s=`Error retrieving icon ${e}:${i}! ${a.message}`;this._errorHandler.handleError(new Error(s))})}}};o.\u0275fac=function(e){return new(e||o)(_(Rt),_(Te),Dt("aria-hidden"),_(be),_(st),_(Ee,8))},o.\u0275cmp=C({type:o,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(e,i){e&2&&(Pt("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Vt(i.color?"mat-"+i.color:""),At("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[Et.HasDecoratorInputTransform,"inline","inline",Wt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[kt,v],ngContentSelectors:Ie,decls:1,vars:0,template:function(e,i){e&1&&(Lt(),jt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=o;return n})(),ge=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=bt({type:o}),o.\u0275inj=Tt({imports:[gt,gt]});let n=o;return n})();function Ve(n,o){if(n&1){let r=M();l(0,"button",16),u("click",function(){g(r);let e=m().index,i=m();return h(i.removeDatoDinamico(e))}),l(1,"mat-icon"),d(2,"remove_circle"),c()()}}function ze(n,o){if(n&1){let r=M();l(0,"div")(1,"mat-form-field",2)(2,"input",13),F("ngModelChange",function(e){let i=g(r).$implicit;return I(i.key,e)||(i.key=e),h(e)}),c()(),l(3,"mat-form-field",2)(4,"input",14),F("ngModelChange",function(e){let i=g(r).$implicit;return I(i.value,e)||(i.value=e),h(e)}),c()(),b(5,Ve,3,0,"button",15),c()}if(n&2){let r=o.$implicit,t=m();p(2),S("ngModel",r.key),p(2),S("ngModel",r.value),p(),R("ngIf",t.datosDinamicos.length>1)}}function Oe(n,o){if(n&1){let r=M();l(0,"button",17),u("click",function(){g(r);let e=m();return h(e.addDatoDinamico())}),d(1,"Agregar Dato Din\xE1mico"),c()}}var he=(()=>{let o=class o{constructor(t,e,i){this.dialogRef=t,this.data=e,this.toast=i,this.resenia="",this.altura=null,this.peso=null,this.temperatura=null,this.presion="",this.datosDinamicos=[{key:"",value:""}]}onConfirm(){if(this.resenia!==""&&this.altura!==null&&this.peso!==null&&this.temperatura!==null&&this.presion!==""){let t={fecha:this.data.turno.fecha,altura:this.altura,peso:this.peso,temperatura:this.temperatura,presion:this.presion,datosDinamicos:this.datosDinamicos.filter(e=>e.key!==""&&e.value!=="")};this.dialogRef.close({historiaClinica:t,resenia:this.resenia})}else this.toast.error("Los campos de rese\xF1a, altura, peso, tempratura y presi\xF3n son obligatorios")}onCancel(){this.dialogRef.close()}addDatoDinamico(){this.datosDinamicos.length<3&&this.datosDinamicos.push({key:"",value:""})}removeDatoDinamico(t){this.datosDinamicos.length>1&&this.datosDinamicos.splice(t,1)}};o.\u0275fac=function(e){return new(e||o)(_(T),_(O),_(dt))},o.\u0275cmp=C({type:o,selectors:[["app-finalizar-turno-dialog"]],standalone:!0,features:[v],decls:21,vars:7,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Deje un diagn\xF3stico como rese\xF1a","rows","5",3,"ngModelChange","ngModel"],["matInput","","placeholder","Altura (cm)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Peso (kg)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Temperatura (\xB0C)","type","number",3,"ngModelChange","ngModel"],["matInput","","placeholder","Presi\xF3n",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text","btn","btn-danger",3,"click"],["mat-button","",1,"dialog-text","btn","btn-success",3,"click"],["matInput","","placeholder","Clave dato din\xE1mico",3,"ngModelChange","ngModel"],["matInput","","placeholder","Valor dato din\xE1mico",3,"ngModelChange","ngModel"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],["mat-button","",3,"click"]],template:function(e,i){e&1&&(l(0,"h1",0),d(1,"Finalizar Turno"),c(),$(2,"br"),l(3,"div",1)(4,"mat-form-field",2)(5,"textarea",3),F("ngModelChange",function(s){return I(i.resenia,s)||(i.resenia=s),s}),c()(),l(6,"mat-form-field",2)(7,"input",4),F("ngModelChange",function(s){return I(i.altura,s)||(i.altura=s),s}),c()(),l(8,"mat-form-field",2)(9,"input",5),F("ngModelChange",function(s){return I(i.peso,s)||(i.peso=s),s}),c()(),l(10,"mat-form-field",2)(11,"input",6),F("ngModelChange",function(s){return I(i.temperatura,s)||(i.temperatura=s),s}),c()(),l(12,"mat-form-field",2)(13,"input",7),F("ngModelChange",function(s){return I(i.presion,s)||(i.presion=s),s}),c()(),b(14,ze,6,3,"div",8)(15,Oe,2,0,"button",9),c(),l(16,"div",10)(17,"button",11),u("click",function(){return i.onCancel()}),d(18,"Cancelar"),c(),l(19,"button",12),u("click",function(){return i.onConfirm()}),d(20,"Guardar"),c()()),e&2&&(p(5),S("ngModel",i.resenia),p(2),S("ngModel",i.altura),p(2),S("ngModel",i.peso),p(2),S("ngModel",i.temperatura),p(2),S("ngModel",i.presion),p(),R("ngForOf",i.datosDinamicos),p(),R("ngIf",i.datosDinamicos.length<3))},dependencies:[J,q,K,Y,ge,ut,tt,Z,X,Q,E,y,Zt,k,Bt,Ut,z,P,Xt,A,V,G],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;padding-top:40px;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var Ce=(()=>{let o=class o{constructor(t,e){this.dialogRef=t,this.data=e}onClose(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T),_(O))},o.\u0275cmp=C({type:o,selectors:[["app-show-motivo-rechazo-dialog"]],standalone:!0,features:[v],decls:8,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(l(0,"h1",0),d(1,"Motivo de Rechazo"),c(),l(2,"div",1)(3,"p"),d(4),c()(),l(5,"div",2)(6,"button",3),u("click",function(){return i.onClose()}),d(7,"Ok"),c()()),e&2&&(p(4),x(i.data.motivo))},dependencies:[E,y],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;height:100px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var ve=(()=>{let o=class o{constructor(t,e){this.dialogRef=t,this.data=e}onClose(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T),_(O))},o.\u0275cmp=C({type:o,selectors:[["app-show-resenia-dialog"]],standalone:!0,features:[v],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],[1,"text-center"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(l(0,"h1",0),d(1,"Rese\xF1a"),c(),l(2,"div",1)(3,"h3",2),d(4,"Diagn\xF3stico"),c(),l(5,"p"),d(6),c()(),l(7,"div",3)(8,"button",4),u("click",function(){return i.onClose()}),d(9,"Ok"),c()()),e&2&&(p(6),x(i.data.resenia))},dependencies:[E,y],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;height:100px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var Me=(()=>{let o=class o{constructor(t){this.dialogRef=t,this.calificacion=""}onConfirm(){this.calificacion!=""&&this.dialogRef.close(this.calificacion)}onCancel(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T))},o.\u0275cmp=C({type:o,selectors:[["app-calificacion-encuesta-dialog"]],standalone:!0,features:[v],decls:10,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Califique a su especialista","rows","5",3,"ngModelChange","ngModel"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(l(0,"h1",0),d(1,"Encuesta"),c(),l(2,"div",1)(3,"mat-form-field",2)(4,"textarea",3),F("ngModelChange",function(s){return I(i.calificacion,s)||(i.calificacion=s),s}),c()()(),l(5,"div",4)(6,"button",5),u("click",function(){return i.onCancel()}),d(7,"Cancelar"),c(),l(8,"button",5),u("click",function(){return i.onConfirm()}),d(9,"Confirmar"),c()()),e&2&&(p(4),S("ngModel",i.calificacion))},dependencies:[J,q,K,Y,tt,Z,X,Q,E,y,k,z,P,A,V,G],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();var xe=(()=>{let o=class o{constructor(t,e){this.dialogRef=t,this.data=e}onClose(){this.dialogRef.close()}};o.\u0275fac=function(e){return new(e||o)(_(T),_(O))},o.\u0275cmp=C({type:o,selectors:[["app-show-calificacion-encuesta-dialog"]],standalone:!0,features:[v],decls:8,vars:1,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-dialog-content","",1,"dialog-content"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",1,"dialog-text",3,"click"]],template:function(e,i){e&1&&(l(0,"h1",0),d(1,"Calificaci\xF3n de la Encuesta"),c(),l(2,"div",1)(3,"p"),d(4),c()(),l(5,"div",2)(6,"button",3),u("click",function(){return i.onClose()}),d(7,"Ok"),c()()),e&2&&(p(4),x(i.data.calificacion))},dependencies:[E,y],styles:[".dialog-title[_ngcontent-%COMP%]{text-align:center;padding-top:1em}.dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;height:100px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:1em}.dialog-text[_ngcontent-%COMP%]{text-align:center}"]});let n=o;return n})();function Ne(n,o){if(n&1&&$(0,"app-spinner",3),n&2){let r=m();R("loading",r.loading)}}function Le(n,o){n&1&&(l(0,"th",10),d(1,"Especialista"),c())}function je(n,o){n&1&&(l(0,"th",10),d(1,"Paciente"),c())}function We(n,o){n&1&&(l(0,"td",13),d(1,"No se encontraron resultados"),c())}function Be(n,o){if(n&1){let r=M();l(0,"td",16),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.setFilter("especialista",e.especialistaId))}),d(1),c()}if(n&2){let r=m().$implicit,t=m(3);p(),x(t.userMap[r.especialistaId])}}function Ue(n,o){if(n&1){let r=M();l(0,"td",16),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.setFilter("paciente",e.pacienteId))}),d(1),c()}if(n&2){let r=m().$implicit,t=m(3);p(),x(t.userMap[r.pacienteId])}}function He(n,o){if(n&1){let r=M();l(0,"button",7),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.changeState(e,"confirmado"))}),d(1," Aceptar "),c(),l(2,"button",20),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.changeState(e,"rechazado"))}),d(3," Rechazar "),c()}}function $e(n,o){if(n&1){let r=M();l(0,"button",19),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.changeState(e,"cancelado"))}),d(1," Cancelar "),c(),b(2,He,4,0)}if(n&2){let r=m(4);p(2),w(2,r.currentRol=="especialista"?2:-1)}}function Ge(n,o){if(n&1){let r=M();l(0,"button",21),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.showMotivo(e))}),d(1," Ver motivo "),c()}}function qe(n,o){if(n&1){let r=M();l(0,"button",21),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.showMotivo(e))}),d(1," Ver motivo "),c()}}function Ye(n,o){if(n&1){let r=M();l(0,"button",22),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.changeState(e,"finalizado"))}),d(1," Finalizar "),c()}}function Ke(n,o){if(n&1){let r=M();l(0,"button",22),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.completarEncuesta(e))}),d(1," Completar Encuesta "),c()}}function Je(n,o){if(n&1){let r=M();l(0,"button",22),u("click",function(){g(r);let e=m(2).$implicit,i=m(3);return h(i.showEncuesta(e))}),d(1," Ver Calificaci\xF3n "),c()}}function Xe(n,o){if(n&1){let r=M();l(0,"button",21),u("click",function(){g(r);let e=m().$implicit,i=m(3);return h(i.showMotivo(e))}),d(1," Ver rese\xF1a "),c(),b(2,Ke,2,0,"button",23)(3,Je,2,0,"button",23)}if(n&2){let r=m().$implicit,t=m(3);p(2),w(2,t.currentRol=="paciente"&&r.comentario==""?2:-1),p(),w(3,r.comentario!=""?3:-1)}}function Qe(n,o){}function Ze(n,o){if(n&1){let r=M();l(0,"tr",9)(1,"td"),d(2),lt(3,"capitalizeFirstLetterPipe"),c(),l(4,"td"),d(5),lt(6,"setFechaWithSlashes"),c(),l(7,"td"),d(8),lt(9,"horariosAmPmFormat"),c(),b(10,Be,2,1,"td",15)(11,Ue,2,1,"td",15),l(12,"td",16),u("click",function(){let e=g(r).$implicit,i=m(3);return h(i.setFilter("especialidad",e.especialidad))}),d(13),c(),l(14,"td",17),d(15),c(),l(16,"td")(17,"div",18),b(18,$e,3,1)(19,Ge,2,0)(20,qe,2,0)(21,Ye,2,0)(22,Xe,4,2)(23,Qe,0,0),c()()()}if(n&2){let r=o.$implicit,t=m(3);p(2),x(ct(3,9,r.fecha.dayName)),p(3),x(ct(6,11,r.fecha.fecha)),p(3),x(ct(9,13,r.fecha.timeSlot.time)),p(2),w(10,t.currentRol!="especialista"?10:-1),p(),w(11,t.currentRol!="paciente"?11:-1),p(2),x(r.especialidad),p(2),x(r.estado),p(3),w(18,r.estado=="pendiente"?18:r.estado=="cancelado"?19:r.estado=="rechazado"?20:r.estado=="confirmado"?21:r.estado=="finalizado"&&r.resenia!=""?22:-1),p(5),w(23,r.comentario!=""||r.resenia!=""?23:-1)}}function ti(n,o){if(n&1&&Ot(0,Ze,24,15,"tr",9,zt),n&2){let r=m(2);Nt(r.pagedTurnos)}}function ei(n,o){if(n&1){let r=M();l(0,"app-listado-filtros",4),u("filterApplied",function(e){g(r);let i=m();return h(i.onFilterApplied(e))})("filtersCleared",function(){g(r);let e=m();return h(e.onFiltersCleared())}),c(),l(1,"div",5)(2,"input",6),F("ngModelChange",function(e){g(r);let i=m();return I(i.generalSearch,e)||(i.generalSearch=e),h(e)}),c(),l(3,"button",7),u("click",function(){g(r);let e=m();return h(e.onGeneralSearch())}),l(4,"mat-icon"),d(5,"search"),c()()(),l(6,"table",8)(7,"thead")(8,"tr",9)(9,"th",10),d(10,"D\xEDa"),c(),l(11,"th",10),d(12,"Fecha"),c(),l(13,"th",10),d(14,"Horario"),c(),b(15,Le,2,0,"th",10)(16,je,2,0,"th",10),l(17,"th",10),d(18,"Especialidad"),c(),l(19,"th",11),d(20,"Estado"),c(),l(21,"th",12),d(22,"Modificar Estado"),c()()(),l(23,"tbody"),b(24,We,2,0,"td",13)(25,ti,2,0),c()(),l(26,"app-paginacion",14),u("pageChanged",function(e){g(r);let i=m();return h(i.setPage(e))}),c()}if(n&2){let r=m();R("currentRol",r.currentRol)("turnos",r.turnos)("filteredTurnos",r.filteredTurnos)("userMap",r.userMap)("especialidadFilter",r.especialidadFilter)("especialistaFilter",r.especialistaFilter)("pacienteFilter",r.pacienteFilter),p(2),S("ngModel",r.generalSearch),p(13),w(15,r.currentRol!="especialista"?15:-1),p(),w(16,r.currentRol!="paciente"?16:-1),p(8),w(24,(r.pagedTurnos==null?null:r.pagedTurnos.length)===0||(r.turnos==null?null:r.turnos.length)==0||!r.turnos?24:25),p(2),R("currentPage",r.currentPage)("totalPages",r.totalPages)}}var Se=(()=>{let o=class o{constructor(t,e,i,a,s){this.userService=t,this.loginService=e,this.turnoService=i,this.toast=a,this.dialog=s,this.loading=!0,this.currentRol="",this.mySelf=null,this.pacientes=[],this.medicos=[],this.turnos=[],this.filteredTurnos=[],this.userMap={},this.currentPage=1,this.pageSize=10,this.especialidadFilter="",this.especialistaFilter="",this.pacienteFilter="",this.generalSearch=""}ngOnInit(){this.getData()}getTurno(t){console.log(t)}getData(){return L(this,null,function*(){try{let t=this.loginService.getLoggedUser();if(this.mySelf=yield this.userService.getUserByEmail(t),this.currentRol=this.mySelf?.rol,this.currentRol=="paciente"?this.turnos=yield this.turnoService.getTurnosFromPaciente(t):this.currentRol=="especialista"&&(this.turnos=yield this.turnoService.getTurnosFromEspecialista(t)),this.filteredTurnos=this.turnos,this.turnos&&this.turnos.length>0)for(let e of this.turnos)this.userMap[e.especialistaId]||(this.userMap[e.especialistaId]=yield this.userService.getNameAndSurnameByEmail(e.especialistaId)),this.userMap[e.pacienteId]||(this.userMap[e.pacienteId]=yield this.userService.getNameAndSurnameByEmail(e.pacienteId))}catch(t){console.log(t)}finally{this.loading=!1}})}completarEncuesta(t){this.dialog.open(Me,{width:"400px",data:{calificacion:""}})?.afterClosed().subscribe(i=>L(this,null,function*(){i&&(t.comentario=i,yield this.turnoService.update(t))}))}showEncuesta(t){let e=t.comentario;t.estado=="finalizado"&&this.dialog.open(xe,{width:"400px",data:{calificacion:e}})}setFilter(t,e){t==="especialidad"?this.especialidadFilter=e:t==="especialista"?this.especialistaFilter=this.userMap[e]:t=="paciente"&&(this.pacienteFilter=this.userMap[e])}onFilterApplied(t){this.especialidadFilter=t.especialidadFilter,this.especialistaFilter=t.especialistaFilter,this.pacienteFilter=t.pacienteFilter,this.applyFilters()}onFiltersCleared(){this.especialidadFilter="",this.especialistaFilter="",this.filteredTurnos=this.turnos}onGeneralSearch(){this.generalSearch=this.generalSearch.toLowerCase(),this.applyFilters()}applyFilters(){this.filteredTurnos=this.turnos?.filter(t=>{let e=this.especialidadFilter?t.especialidad.includes(this.especialidadFilter):!0,i=this.especialistaFilter?this.userMap[t.especialistaId].includes(this.especialistaFilter):!0,a=this.pacienteFilter?this.userMap[t.pacienteId].includes(this.pacienteFilter):!0,s=this.generalSearch?this.matchGeneralSearch(t):!0;return e&&i&&a&&s})}matchGeneralSearch(t){let e=this.generalSearch;return[t.especialidad,this.userMap[t.especialistaId],this.userMap[t.pacienteId],t.fecha.dayName,t.fecha.fecha,t.fecha.timeSlot.time,t.estado,t.resenia,t.comentario,...Object.values(this.mySelf?.historiaClinica||[]).flatMap(a=>[a.altura,a.peso,a.temperatura,a.presion,...a.datosDinamicos?.flatMap(s=>[s.key,s.value])||[]])].some(a=>a?.toString().toLowerCase().includes(e))}changeState(t,e){return L(this,null,function*(){let i=null;e=="cancelado"&&(i=this.dialog.open(ae,{width:"400px",data:{motivo:""}})),e=="rechazado"&&(i=this.dialog.open(de,{width:"400px",data:{motivo:""}})),(e=="cancelado"||e=="rechazado")&&i?.afterClosed().subscribe(a=>L(this,null,function*(){a&&(t.estado=e,t.comentario=a,t.fecha.timeSlot.estaDisponible=!0,yield this.turnoService.update(t))})),e=="confirmado"&&(this.toast.success("Turno confirmado!"),t.estado=e,yield this.turnoService.update(t)),e=="finalizado"&&(i=this.dialog.open(he,{width:"400px",data:{turno:t}}),i?.afterClosed().subscribe(a=>L(this,null,function*(){a&&(t.estado=e,t.resenia=a.resenia,yield this.cargarHistoriaClinica(t,a.historiaClinica),yield this.turnoService.update(t))})))})}cargarHistoriaClinica(t,e){return L(this,null,function*(){if(t&&t.estado==="finalizado"){let i=yield this.userService.getUserByEmail(t.pacienteId);i.historiaClinica=i.historiaClinica?.filter(a=>a&&Object.keys(a).length>0)||[],i.historiaClinica?i.historiaClinica.push(e):i.historiaClinica=[e],yield this.userService.update(i)}})}showMotivo(t){let e=t.comentario;if(t.estado=="cancelado"&&this.dialog.open(re,{width:"400px",data:{motivo:e}}),t.estado=="rechazado"&&this.dialog.open(Ce,{width:"400px",data:{motivo:e}}),t.estado=="finalizado"){let i=t.resenia;this.dialog.open(ve,{width:"400px",data:{resenia:i}})}}get pagedTurnos(){let t=(this.currentPage-1)*this.pageSize;return this.filteredTurnos?.slice(t,t+this.pageSize)}get totalPages(){return this.filteredTurnos?Math.ceil(this.filteredTurnos.length/this.pageSize):0}setPage(t){this.currentPage=t}};o.\u0275fac=function(e){return new(e||o)(_(qt),_(Gt),_(oe),_(dt),_(Qt))},o.\u0275cmp=C({type:o,selectors:[["app-mis-turnos"]],standalone:!0,features:[v],decls:5,vars:1,consts:[[1,"container-fluid"],[1,"container","mt-4"],[1,"row","container"],[3,"loading"],[3,"filterApplied","filtersCleared","currentRol","turnos","filteredTurnos","userMap","especialidadFilter","especialistaFilter","pacienteFilter"],[1,"filtro-general","mb-3","d-flex","align-items-center",2,"margin-top","1em"],["type","text","placeholder","Buscar por cualquier campo",1,"form-control","me-2",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"table","table-striped","table-light","container"],[1,"text-center"],["scope","col"],["scope","col",2,"width","120px"],["scope","col",1,"td-modify-state"],["colspan","8",1,"td-no-results"],[3,"pageChanged","currentPage","totalPages"],[1,"td-clickeable"],[1,"td-clickeable",3,"click"],[2,"width","120px"],[1,"td-modify-state"],[1,"btn","btn-dark",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2),b(3,Ne,1,1,"app-spinner",3)(4,ei,27,13),c()()()),e&2&&(p(3),w(3,i.loading?3:4))},dependencies:[ut,z,P,A,V,k,Jt,se,te,ne,ie,ee],styles:['.container-fluid[_ngcontent-%COMP%]{height:90vh;background-color:#6ad8d4;background-image:url("./media/main_fondo-S2RK2XML.png");background-size:250px 250px;background-repeat:repeat;background-position:center;padding:20px}.mt-4[_ngcontent-%COMP%]{background-color:#add8e6;height:800px}table[_ngcontent-%COMP%]{margin-top:1em}.td-modify-state[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly;align-items:center}.td-clickeable[_ngcontent-%COMP%]:hover{opacity:.6;cursor:pointer}.td-no-results[_ngcontent-%COMP%]{background-color:#fff;text-align:center;font-size:medium;padding-top:1em;padding-bottom:1em}.filtro-general[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.btn-success[_ngcontent-%COMP%]{width:90px;height:38px}']});let n=o;return n})();var Fn=(()=>{let o=class o{};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=C({type:o,selectors:[["app-mis-turnos-container"]],standalone:!0,features:[v],decls:4,vars:0,consts:[[1,"container-fluid","m-0","p-0"]],template:function(e,i){e&1&&(l(0,"div",0),$(1,"app-navbar")(2,"app-mis-turnos")(3,"app-footer"),c())},dependencies:[Se,Yt,Kt]});let n=o;return n})();export{Fn as MisTurnosContainerComponent};
