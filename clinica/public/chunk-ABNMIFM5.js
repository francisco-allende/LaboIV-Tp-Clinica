import{a as H}from"./chunk-7MA7VR3Q.js";import{p as V}from"./chunk-SSCLPC2F.js";import{a as z}from"./chunk-DAF4DERI.js";import"./chunk-TAME4DBA.js";import{a as D,b as j}from"./chunk-SCZ67AR2.js";import{a as L,b as U}from"./chunk-PAXTVJSM.js";import"./chunk-XE5KUILY.js";import{a as F}from"./chunk-RCHQO65C.js";import{P as T}from"./chunk-MT3VMLBQ.js";import"./chunk-3PKXA2GJ.js";import"./chunk-XCRSOGC7.js";import{$a as d,Ab as o,Bb as g,Eb as E,Hb as b,Ib as p,Rb as c,Tb as x,Ub as k,Ya as S,_a as m,_b as h,h as u,na as f,pb as I,rb as C,vb as y,wb as P,xa as v,xb as w,ya as _,yb as M,yc as O,zb as s}from"./chunk-EWRZD5YS.js";function N(i,t){if(i&1&&g(0,"app-spinner",3),i&2){let a=p();C("loading",a.loading)}}function K(i,t){if(i&1){let a=E();s(0,"div",4),g(1,"img",5),s(2,"button",6),b("click",function(){let n=v(a).$implicit,r=p(2);return _(r.toggleImage(n))}),c(3,"Cambiar Imagen"),o(),s(4,"div",7)(5,"p",8)(6,"strong"),c(7,"Paciente:"),o(),c(8),o(),s(9,"p",8)(10,"strong"),c(11,"DNI:"),o(),c(12),o(),s(13,"p",8)(14,"strong"),c(15,"Email:"),o(),c(16),o(),s(17,"p",8)(18,"strong"),c(19,"Obra Social:"),o(),c(20),o(),s(21,"button",9),b("click",function(){let n=v(a).$implicit,r=p(2);return _(r.verHistoriaClinica(n))}),c(22," Ver Historia Clinica "),o()()()}if(i&2){let a=t.$implicit,e=p(2);m(),C("src",e.selectedImages[a.email],S),m(7),k(" ",a.nombre," ",a.apellido,""),m(4),x(" ",a.dni," "),m(4),x(" ",a.email,""),m(4),x(" ",a.obraSocial,"")}}function R(i,t){if(i&1&&w(0,K,23,6,"div",4,P),i&2){let a=p();M(a.pacientes)}}var B=(()=>{let t=class t{constructor(e,n,r,l,$){this.userService=e,this.loginService=n,this.toast=r,this.turnoService=l,this.dialog=$,this.mySelf=null,this.loading=!0,this.turnos=[],this.pacientes=[],this.selectedImages={}}ngOnInit(){this.getData()}getData(){return u(this,null,function*(){try{let e=this.loginService.getLoggedUser();this.mySelf=yield this.userService.getUserByEmail(e),this.turnos=yield this.turnoService.getTurnosFromEspecialista(e),this.mapPacientes()}catch(e){console.log(e)}finally{this.loading=!1}})}mapPacientes(){return u(this,null,function*(){let e=new Map;if(this.turnos&&this.turnos.length>0){let n=this.turnos.map(r=>u(this,null,function*(){let l=yield this.userService.getUserByEmail(r.pacienteId);l&&!e.has(l.email)&&e.set(l.email,l)}));yield Promise.all(n),this.pacientes=Array.from(e.values()),this.pacientes.forEach(r=>{this.selectedImages[r.email]=r.mainImg})}})}toggleImage(e){this.selectedImages[e.email]===e.mainImg?e.extraImg&&(this.selectedImages[e.email]=e.extraImg):this.selectedImages[e.email]=e.mainImg}verHistoriaClinica(e){this.dialog.open(H,{width:"600px",data:e.historiaClinica})}};t.\u0275fac=function(n){return new(n||t)(d(L),d(F),d(T),d(z),d(V))},t.\u0275cmp=f({type:t,selectors:[["app-listado-pacientes"]],standalone:!0,features:[h],decls:5,vars:1,consts:[[1,"container-fluid"],[1,"container","mt-4"],[1,"row","container"],[3,"loading"],[1,"user-card"],["alt","User Image",1,"user-image",3,"src"],[1,"btn","btn-primary","text-center",3,"click"],[1,"user-details"],[1,"user-data"],[1,"btn","btn-dark","text-center",3,"click"]],template:function(n,r){n&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),I(3,N,1,1,"app-spinner",3)(4,R,2,0),o()()()),n&2&&(m(3),y(3,r.loading?3:4))},dependencies:[U,O],styles:['.container-fluid[_ngcontent-%COMP%]{height:85vh;background-color:#6ad8d4;background-image:url("./media/main_fondo-S2RK2XML.png");background-size:250px 250px;background-repeat:repeat;background-position:center;padding:20px}.mt-4[_ngcontent-%COMP%]{height:800px}.user-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 6px #0000001a;text-align:center;margin:1em auto 0;padding:16px;width:400px}.user-image[_ngcontent-%COMP%]{border-radius:50%;width:200px;height:200px;object-fit:cover;margin-top:1em;margin-bottom:3em}.user-details[_ngcontent-%COMP%]{font-family:Arial,sans-serif}.user-data[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:1.2em}.list-container[_ngcontent-%COMP%]{width:50%;margin-left:25%;text-align:left}.list-data[_ngcontent-%COMP%]{margin-top:.5em}button[_ngcontent-%COMP%]:hover{cursor:pointer;color:#fff}.btn[_ngcontent-%COMP%]{margin:1em}']});let i=t;return i})();var ae=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=f({type:t,selectors:[["app-pacientes-container"]],standalone:!0,features:[h],decls:4,vars:0,consts:[[1,"container-fluid","m-0","p-0"]],template:function(n,r){n&1&&(s(0,"div",0),g(1,"app-navbar")(2,"app-listado-pacientes")(3,"app-footer"),o())},dependencies:[B,D,j]});let i=t;return i})();export{ae as PacientesContainerComponent};
