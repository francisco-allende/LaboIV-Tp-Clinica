<div class="container-fluid">
  <div class="container mt-4">
    <div class="row container">

    <app-spinner [loading]="loading"></app-spinner>
    @if(!loading){
      <table class="table table-striped table-light container">
        <thead>
          <tr class="text-center">
            <th scope="col">Imagen perfil</th>
            <th scope="col">Imagen extra</th>
            <th scope="col">Nombre</th>
            <th scope="col">Apellido</th>
            <th scope="col">DNI</th>
            <th scope="col">Email</th>
            <th scope="col">Rol</th>
            <th scope="col">Obra social</th>
            <th scope="col">Especialidad</th>
            <th scope="col" style="width: 112px;">Estado</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          
      @for(user of pagedUsers; track user ){
          <tr class="text-center">
                <td><img src="{{ user.mainImg }}" width="50px" height="50px" /></td>
                <td>@if(user.extraImg){
                  <img [src]="user.extraImg" width="50px" height="50px" />
                  }@else {
                    -
                  }
                </td>
                <td>{{ user.nombre }}</td>
                <td>{{ user.apellido }}</td>
                <td>{{ user.dni }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.rol }}</td>
                <td>{{ user.obraSocial ? user.obraSocial : '-' }}</td>
                <td>{{ user.especialidad ? user.especialidad : '-' }}</td>
                <td>{{ user.estado }}</td>
                <td>
                  @if(user.estado == "pendiente" || user.estado == "deshabilitado"){
                    <button class="btn btn-success" (click)="changeState(user, 'habilitado')"> Habilitar </button>
                  }@else if (user.estado == "habilitado") {
                    <button class="btn btn-danger" (click)="changeState(user, 'deshabilitado')"> Desabilitar </button>
                  }
                </td>
            </tr>
        }
        </tbody>
      </table>
    
      <app-paginacion
        [currentPage]="currentPage"
        [totalPages]="totalPages"
        (pageChanged)="setPage($event)">
      </app-paginacion>
    }
    </div>
  </div>
</div>

